{"remainingRequest":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vuetify-loader/lib/loader.js??ref--19-0!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/components/layers/filter/PoisAoisTree.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/components/layers/filter/PoisAoisTree.vue","mtime":1657636289855},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js","mtime":1657636581841},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js","mtime":1657636581481},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vuetify-loader/lib/loader.js","mtime":1657636582513},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js","mtime":1657636581841},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vue-loader/lib/index.js","mtime":1657636582549}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Mapable } from \"../../../mixins/Mapable\";\nimport { mapGetters } from \"vuex\";\nimport { mapMutations } from \"vuex\";\nimport { mapFields } from \"vuex-map-fields\"; // Child components\n\nimport HeatmapOptions from \"./HeatmapOptions\";\nimport IconPicker from \"../../other/IconPicker\";\nimport UserDataUploadDialog from \"../../core/UserDataUploadDialog.vue\"; // TODO: Fix sensitivity settings for every pois\n\nexport default {\n  mixins: [Mapable],\n  components: {\n    \"heatmap-options\": HeatmapOptions,\n    \"icon-picker\": IconPicker,\n    \"user-data-upload\": UserDataUploadDialog\n  },\n  data: function data() {\n    return {\n      open: [],\n      showHeatmapOptionsDialog: false,\n      showDataUploadDialog: false,\n      showIconPickerDialog: false,\n      selectedIcon: {},\n      selectedAmenity: {}\n    };\n  },\n  methods: _objectSpread({\n    toggleHeatmapDialog: function toggleHeatmapDialog(amenity) {\n      this.selectedAmenity = amenity;\n      this.showHeatmapOptionsDialog = true;\n    },\n    toggleIconPickerDialog: function toggleIconPickerDialog(icon) {\n      // Disable icon style change for groups and aois\n      if (icon.children || this.aoisConfig[icon.value]) {\n        return;\n      }\n\n      this.selectedIcon = icon;\n      this.showIconPickerDialog = true;\n    },\n    isSensitivityEnabled: function isSensitivityEnabled(item) {\n      if (this.aoisConfig[item.value]) {\n        return false;\n      }\n\n      return true;\n    },\n    openNode: function openNode() {\n      this.addBackgroundColorToTreeNode();\n    },\n    addBackgroundColorToTreeNode: function addBackgroundColorToTreeNode() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        _this.$nextTick(function () {\n          var elements = document.querySelectorAll(\".user-data-icon\");\n          elements.forEach(function (element) {\n            var parentEl = element.parentElement.parentElement;\n\n            if (element.style.display !== \"none\") {\n              if (parentEl.classList.contains(\"v-treeview-node__root\") || parentEl.classList.contains(\"v-treeview-node\")) {\n                parentEl.classList.add(\"tree-node-view-background\");\n              }\n            } else {\n              parentEl.classList.remove(\"tree-node-view-background\");\n            }\n          });\n        });\n      });\n    },\n    getIconColor: function getIconColor(item) {\n      if (!item.color) {\n        return \"grey\";\n      }\n\n      return item.color[0];\n    }\n  }, mapMutations(\"map\", {\n    toggleSnackbar: \"TOGGLE_SNACKBAR\"\n  })),\n  watch: {\n    open: function open() {\n      console.log(\"opened....\");\n    },\n    uploadedData: function uploadedData() {\n      this.treeViewKey += 1;\n    }\n  },\n  computed: _objectSpread({}, mapGetters(\"app\", {\n    appColor: \"appColor\",\n    poisAoisTree: \"poisAoisTree\",\n    uploadedData: \"uploadedData\",\n    aoisConfig: \"aoisConfig\"\n  }), {}, mapFields(\"app\", {\n    calculationMode: \"calculationMode\",\n    layerTabIndex: \"layerTabIndex\"\n  }), {}, mapFields(\"poisaois\", {\n    poisAoisLayer: \"poisAoisLayer\",\n    selectedPoisAois: \"selectedPoisAois\",\n    poisAois: \"poisAois\",\n    treeViewKey: \"treeViewKey\"\n  }))\n};",{"version":3,"sources":["PoisAoisTree.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <v-tooltip top>\n      <template v-slot:activator=\"{ on }\">\n        <v-btn\n          v-on=\"on\"\n          class=\"mt-n11 ml-2\"\n          :color=\"appColor.primary\"\n          fab\n          dark\n          small\n          @click=\"showDataUploadDialog = true\"\n        >\n          <v-icon dark>add</v-icon>\n        </v-btn>\n      </template>\n      <span>Upload POI Dataset</span></v-tooltip\n    >\n\n    <v-treeview\n      :key=\"treeViewKey\"\n      v-model=\"selectedPoisAois\"\n      :open=\"open\"\n      @update:open=\"openNode\"\n      :items=\"poisAoisTree\"\n      activatable\n      open-on-click\n      dense\n      selectable\n      rounded\n      return-object\n      item-key=\"value\"\n      item-disabled=\"isLocked\"\n      :selected-color=\"appColor.primary\"\n      active-class=\"grey lighten-4 indigo--text \"\n      on-icon=\"check_box\"\n      off-icon=\"check_box_outline_blank\"\n      indeterminate-icon=\"indeterminate_check_box\"\n    >\n      <template v-slot:prepend=\"{ item }\">\n        <v-tooltip\n          top\n          :disabled=\"Array.isArray(item.children) || !!aoisConfig[item.value]\"\n        >\n          <template v-slot:activator=\"{ on }\">\n            <i\n              v-on=\"on\"\n              @click=\"toggleIconPickerDialog(item)\"\n              :class=\"\n                item.icon +\n                  ' v-icon notranslate ml-1 v-icon--dense theme--light grey--text ml-1'\n              \"\n              :style=\"\n                Array.isArray(item.color) && item.color.length > 1\n                  ? `--fa-primary-color: ${item.color[0]};--fa-secondary-color: ${item.color[1]};width:20px;`\n                  : `color: ${item.color} !important;width:20px;`\n              \"\n            >\n            </i>\n          </template>\n          {{ $t(\"appBar.filter.poisSettings.changeIcon\") }}\n        </v-tooltip>\n      </template>\n      <template v-slot:label=\"{ item }\">\n        <div class=\"tree-label-custom\">\n          {{\n            item.name\n              ? item.name\n              : $te(`pois.${item.value}`)\n              ? $t(`pois.${item.value}`)\n              : item.value\n          }}\n        </div>\n      </template>\n      <template v-slot:append=\"{ item, open }\">\n        <v-tooltip top>\n          <template v-slot:activator=\"{ on }\">\n            <v-icon\n              :ref=\"item.value\"\n              v-on=\"on\"\n              v-if=\"item.hasUserData\"\n              v-show=\"!open\"\n              class=\"mr-2 mt-0 user-data-icon\"\n              x-small\n              :color=\"appColor.primary\"\n              >fa-solid fa-circle</v-icon\n            > </template\n          >{{ $t(\"appBar.filter.poisSettings.userDataSet\") }}</v-tooltip\n        >\n\n        <template v-if=\"isSensitivityEnabled(item) && !item.children\">\n          <v-tooltip top>\n            <template v-slot:activator=\"{ on }\">\n              <v-icon\n                @click=\"toggleHeatmapDialog(item)\"\n                small\n                v-on=\"on\"\n                class=\"arrow-icons mr-1\"\n              >\n                fas fa-cog\n              </v-icon>\n            </template>\n            <span>{{ $t(\"appBar.filter.poisSettings.buttonTooltip\") }}</span>\n          </v-tooltip>\n        </template>\n      </template>\n    </v-treeview>\n    <heatmap-options\n      :color=\"appColor.primary\"\n      :visible=\"showHeatmapOptionsDialog\"\n      :selectedAmenity=\"selectedAmenity\"\n      @close=\"showHeatmapOptionsDialog = false\"\n    />\n    <icon-picker\n      :color=\"appColor.primary\"\n      :visible=\"showIconPickerDialog\"\n      :selectedIcon=\"selectedIcon\"\n      @close=\"showIconPickerDialog = false\"\n    >\n    </icon-picker>\n    <user-data-upload\n      :visible=\"showDataUploadDialog\"\n      @close=\"showDataUploadDialog = false\"\n    />\n  </div>\n</template>\n\n<script>\nimport { Mapable } from \"../../../mixins/Mapable\";\nimport { mapGetters } from \"vuex\";\nimport { mapMutations } from \"vuex\";\nimport { mapFields } from \"vuex-map-fields\";\n// Child components\nimport HeatmapOptions from \"./HeatmapOptions\";\nimport IconPicker from \"../../other/IconPicker\";\nimport UserDataUploadDialog from \"../../core/UserDataUploadDialog.vue\";\n\n// TODO: Fix sensitivity settings for every pois\n\nexport default {\n  mixins: [Mapable],\n  components: {\n    \"heatmap-options\": HeatmapOptions,\n    \"icon-picker\": IconPicker,\n    \"user-data-upload\": UserDataUploadDialog\n  },\n  data() {\n    return {\n      open: [],\n      showHeatmapOptionsDialog: false,\n      showDataUploadDialog: false,\n      showIconPickerDialog: false,\n      selectedIcon: {},\n      selectedAmenity: {}\n    };\n  },\n\n  methods: {\n    toggleHeatmapDialog(amenity) {\n      this.selectedAmenity = amenity;\n      this.showHeatmapOptionsDialog = true;\n    },\n    toggleIconPickerDialog(icon) {\n      // Disable icon style change for groups and aois\n      if (icon.children || this.aoisConfig[icon.value]) {\n        return;\n      }\n      this.selectedIcon = icon;\n      this.showIconPickerDialog = true;\n    },\n    isSensitivityEnabled(item) {\n      if (this.aoisConfig[item.value]) {\n        return false;\n      }\n      return true;\n    },\n    openNode() {\n      this.addBackgroundColorToTreeNode();\n    },\n    addBackgroundColorToTreeNode() {\n      this.$nextTick(() => {\n        this.$nextTick(() => {\n          const elements = document.querySelectorAll(\".user-data-icon\");\n          elements.forEach(element => {\n            let parentEl = element.parentElement.parentElement;\n            if (element.style.display !== \"none\") {\n              if (\n                parentEl.classList.contains(\"v-treeview-node__root\") ||\n                parentEl.classList.contains(\"v-treeview-node\")\n              ) {\n                parentEl.classList.add(\"tree-node-view-background\");\n              }\n            } else {\n              parentEl.classList.remove(\"tree-node-view-background\");\n            }\n          });\n        });\n      });\n    },\n    getIconColor(item) {\n      if (!item.color) {\n        return \"grey\";\n      }\n      return item.color[0];\n    },\n    ...mapMutations(\"map\", {\n      toggleSnackbar: \"TOGGLE_SNACKBAR\"\n    })\n  },\n  watch: {\n    open() {\n      console.log(\"opened....\");\n    },\n    uploadedData() {\n      this.treeViewKey += 1;\n    }\n  },\n  computed: {\n    ...mapGetters(\"app\", {\n      appColor: \"appColor\",\n      poisAoisTree: \"poisAoisTree\",\n      uploadedData: \"uploadedData\",\n      aoisConfig: \"aoisConfig\"\n    }),\n    ...mapFields(\"app\", {\n      calculationMode: \"calculationMode\",\n      layerTabIndex: \"layerTabIndex\"\n    }),\n    ...mapFields(\"poisaois\", {\n      poisAoisLayer: \"poisAoisLayer\",\n      selectedPoisAois: \"selectedPoisAois\",\n      poisAois: \"poisAois\",\n      treeViewKey: \"treeViewKey\"\n    })\n  }\n};\n</script>\n<style lang=\"css\">\n.arrow-icons {\n  color: \"#4A4A4A\";\n}\n.arrow-icons:hover {\n  cursor: pointer;\n  color: #30c2ff;\n}\n\n.pois-icon {\n  margin-bottom: 15px;\n}\n.v-treeview-node--leaf {\n  margin-left: 30px;\n}\n.v-treeview-node__content,\n.v-treeview-node__label {\n  flex-shrink: 1;\n}\n.tree-label-custom {\n  display: block;\n  width: 150px;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.v-treeview-node--leaf > .v-treeview-node__root {\n  padding-left: 5px;\n  padding-right: 4px;\n}\n\n.tree-node-view-background {\n  background-color: #f5f5f5;\n}\n</style>\n"],"sourceRoot":"src/components/layers/filter"}]}