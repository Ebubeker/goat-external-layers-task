{"remainingRequest":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/eslint-loader/index.js??ref--13-0!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/store/modules/poisaois.js","dependencies":[{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/store/modules/poisaois.js","mtime":1657636289863},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js","mtime":1657636581841},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js","mtime":1657636581481},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/eslint-loader/index.js","mtime":1657636581253}],"contextDependencies":[],"result":["import _defineProperty from \"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { getField, updateField } from \"vuex-map-fields\";\nimport ApiService from \"../../services/api.service\";\nimport { GET_POIS_AOIS } from \"../actions.type\";\nimport { SET_POIS_AOIS } from \"../mutations.type\";\nimport { geobufToFeatures } from \"../../utils/MapUtils\"; //parts of the data will be loaded dynamically from app conf json\n\nvar state = {\n  poisAoisLayer: null,\n  poisAois: {},\n  selectedPoisAois: [],\n  treeViewKey: 0 // Used for re-rendering the tree view\n\n};\nvar getters = {\n  dynamicHeatmapTravelTimes: function dynamicHeatmapTravelTimes() {\n    var dynamicHeatmapTravelTimes = [];\n\n    for (var i = 0; i <= 120; i++) {\n      dynamicHeatmapTravelTimes.push(i * 10);\n    }\n\n    return dynamicHeatmapTravelTimes;\n  },\n  poisAois: function poisAois(state) {\n    return state.poisAois;\n  },\n  poisAoisLayer: function poisAoisLayer(state) {\n    return state.poisAoisLayer;\n  },\n  // eslint-disable-next-line no-unused-vars\n  selectedPois: function selectedPois(state, getters, rootState, rootGetters) {\n    var poisConfig = rootGetters[\"app/poisConfig\"];\n    var pois = state.selectedPoisAois.filter(function (poi) {\n      if (poisConfig[poi.value]) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n    return pois;\n  },\n  selectedPoisOnlyKeys: function selectedPoisOnlyKeys(state, getters) {\n    var selectedPoiKeys = [];\n    getters.selectedPois.forEach(function (poi) {\n      selectedPoiKeys.push(poi.value);\n    });\n    return selectedPoiKeys;\n  },\n  // eslint-disable-next-line no-unused-vars\n  selectedAois: function selectedAois(state, getters, rootState, rootGetters) {\n    var aoisConfig = rootGetters[\"app/aoisConfig\"];\n    var aois = state.selectedPoisAois.filter(function (aoi) {\n      if (aoisConfig[aoi.value]) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n    return aois;\n  },\n  selectedAoisOnlyKeys: function selectedAoisOnlyKeys(state, getters) {\n    var selectedAoiKeys = [];\n    getters.selectedAois.forEach(function (aoi) {\n      selectedAoiKeys.push(aoi.value);\n    });\n    return selectedAoiKeys;\n  },\n  getField: getField\n};\n\nvar actions = _defineProperty({}, GET_POIS_AOIS, function (context) {\n  return new Promise(function (resolve, reject) {\n    ApiService.get_(\"/pois-aois/visualization?return_type=db_geobuf\", {\n      responseType: \"arraybuffer\",\n      headers: {\n        Accept: \"application/pdf\"\n      }\n    }).then(function (response) {\n      resolve(response);\n\n      if (response.data) {\n        resolve(response.data);\n        var olFeatures = geobufToFeatures(response.data, {\n          dataProjection: \"EPSG:4326\",\n          featureProjection: \"EPSG:3857\"\n        });\n        context.commit(SET_POIS_AOIS, olFeatures);\n      }\n    }).catch(function (_ref) {\n      var response = _ref.response;\n      reject(response);\n    });\n  });\n});\n\nvar mutations = _defineProperty({\n  updateField: updateField\n}, SET_POIS_AOIS, function (state, poisAois) {\n  if (state.poisAoisLayer) {\n    state.poisAoisLayer.getSource().clear();\n    state.poisAoisLayer.getSource().addFeatures(poisAois);\n    state.selectedPoisAois = JSON.parse(JSON.stringify(state.selectedPoisAois));\n  }\n});\n\nexport default {\n  namespaced: true,\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n};",{"version":3,"sources":["/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/store/modules/poisaois.js"],"names":["getField","updateField","ApiService","GET_POIS_AOIS","SET_POIS_AOIS","geobufToFeatures","state","poisAoisLayer","poisAois","selectedPoisAois","treeViewKey","getters","dynamicHeatmapTravelTimes","i","push","selectedPois","rootState","rootGetters","poisConfig","pois","filter","poi","value","selectedPoisOnlyKeys","selectedPoiKeys","forEach","selectedAois","aoisConfig","aois","aoi","selectedAoisOnlyKeys","selectedAoiKeys","actions","context","Promise","resolve","reject","get_","responseType","headers","Accept","then","response","data","olFeatures","dataProjection","featureProjection","commit","catch","mutations","getSource","clear","addFeatures","JSON","parse","stringify","namespaced"],"mappings":"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","sourcesContent":["import { getField, updateField } from \"vuex-map-fields\";\nimport ApiService from \"../../services/api.service\";\nimport { GET_POIS_AOIS } from \"../actions.type\";\nimport { SET_POIS_AOIS } from \"../mutations.type\";\nimport { geobufToFeatures } from \"../../utils/MapUtils\";\n//parts of the data will be loaded dynamically from app conf json\n\nconst state = {\n  poisAoisLayer: null,\n  poisAois: {},\n  selectedPoisAois: [],\n  treeViewKey: 0 // Used for re-rendering the tree view\n};\n\nconst getters = {\n  dynamicHeatmapTravelTimes: () => {\n    const dynamicHeatmapTravelTimes = [];\n    for (let i = 0; i <= 120; i++) {\n      dynamicHeatmapTravelTimes.push(i * 10);\n    }\n    return dynamicHeatmapTravelTimes;\n  },\n  poisAois: state => state.poisAois,\n  poisAoisLayer: state => state.poisAoisLayer,\n  // eslint-disable-next-line no-unused-vars\n  selectedPois: (state, getters, rootState, rootGetters) => {\n    const poisConfig = rootGetters[\"app/poisConfig\"];\n    const pois = state.selectedPoisAois.filter(poi => {\n      if (poisConfig[poi.value]) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n    return pois;\n  },\n  selectedPoisOnlyKeys: (state, getters) => {\n    const selectedPoiKeys = [];\n    getters.selectedPois.forEach(poi => {\n      selectedPoiKeys.push(poi.value);\n    });\n    return selectedPoiKeys;\n  },\n  // eslint-disable-next-line no-unused-vars\n  selectedAois: (state, getters, rootState, rootGetters) => {\n    const aoisConfig = rootGetters[\"app/aoisConfig\"];\n    const aois = state.selectedPoisAois.filter(aoi => {\n      if (aoisConfig[aoi.value]) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n    return aois;\n  },\n  selectedAoisOnlyKeys: (state, getters) => {\n    const selectedAoiKeys = [];\n    getters.selectedAois.forEach(aoi => {\n      selectedAoiKeys.push(aoi.value);\n    });\n    return selectedAoiKeys;\n  },\n\n  getField\n};\n\nconst actions = {\n  [GET_POIS_AOIS](context) {\n    return new Promise((resolve, reject) => {\n      ApiService.get_(`/pois-aois/visualization?return_type=db_geobuf`, {\n        responseType: \"arraybuffer\",\n        headers: {\n          Accept: \"application/pdf\"\n        }\n      })\n        .then(response => {\n          resolve(response);\n          if (response.data) {\n            resolve(response.data);\n            const olFeatures = geobufToFeatures(response.data, {\n              dataProjection: \"EPSG:4326\",\n              featureProjection: \"EPSG:3857\"\n            });\n            context.commit(SET_POIS_AOIS, olFeatures);\n          }\n        })\n        .catch(({ response }) => {\n          reject(response);\n        });\n    });\n  }\n};\n\nconst mutations = {\n  updateField,\n  [SET_POIS_AOIS](state, poisAois) {\n    if (state.poisAoisLayer) {\n      state.poisAoisLayer.getSource().clear();\n      state.poisAoisLayer.getSource().addFeatures(poisAois);\n\n      state.selectedPoisAois = JSON.parse(\n        JSON.stringify(state.selectedPoisAois)\n      );\n    }\n  }\n};\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations\n};\n"]}]}