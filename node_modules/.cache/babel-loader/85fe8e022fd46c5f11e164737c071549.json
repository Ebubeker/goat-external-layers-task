{"remainingRequest":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vuetify-loader/lib/loader.js??ref--19-0!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/components/core/UserDataUploadDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/components/core/UserDataUploadDialog.vue","mtime":1657636289855},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js","mtime":1657636581841},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js","mtime":1657636581481},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vuetify-loader/lib/loader.js","mtime":1657636582513},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js","mtime":1657636581841},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vue-loader/lib/index.js","mtime":1657636582549}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from \"vuex\";\nimport ApiService from \"../../services/api.service\";\nimport { GET_USER_CUSTOM_DATA } from \"../../store/actions.type\";\nexport default {\n  data: function data() {\n    return {\n      isBusy: false,\n      isValid: true,\n      selectedFile: null,\n      isSelecting: false,\n      isCustom: false,\n      selectedPoi: null,\n      isUploadBusy: false,\n      filesizeLimit: 1e8,\n      errorMessage: null,\n      minLength: function minLength(val) {\n        if (val < 2) return \"Please enter a text with at least 1 characters\";\n        return true;\n      }\n    };\n  },\n  props: [\"visible\"],\n  computed: _objectSpread({\n    show: {\n      get: function get() {\n        return this.visible;\n      },\n      set: function set(value) {\n        if (!value) {\n          this.$emit(\"close\");\n        }\n      }\n    }\n  }, mapGetters(\"app\", {\n    appColor: \"appColor\",\n    poiIcons: \"poiIcons\",\n    poisConfig: \"poisConfig\"\n  }), {\n    poiList: function poiList() {\n      var _this = this;\n\n      var poiIcons = this.poiIcons;\n      var poiNames = Object.keys(poiIcons);\n      return poiNames.map(function (poiName) {\n        if (_this.poisConfig[poiName]) {\n          return {\n            type: poiName,\n            icon: poiIcons[poiName].icon,\n            color: poiIcons[poiName].color\n          };\n        }\n      });\n    }\n  }),\n  methods: {\n    isCustomClicked: function isCustomClicked() {\n      this.selectedPoi = null;\n      this.isValid = true;\n    },\n    onUploadButtonClick: function onUploadButtonClick() {\n      var _this2 = this;\n\n      this.isSelecting = true;\n      window.addEventListener(\"focus\", function () {\n        _this2.isSelecting = false;\n      }, {\n        once: true\n      });\n      this.$refs.uploader.click();\n    },\n    onFileChanged: function onFileChanged(e) {\n      var _this3 = this;\n\n      this.selectedFile = e.target.files[0];\n      this.errorMessage = null;\n      this.isUploadBusy = true;\n\n      if (this.selectedFile) {\n        if (this.selectedFile.size > this.filesizeLimit //100mb TODO: Get from config / user settings\n        ) {\n            this.isUploadBusy = false;\n            this.errorMessage = this.$t(\"appBar.dataUpload.dialog.sizeLimitExceeded\");\n            this.selectedFile = null;\n            return;\n          }\n\n        var formData = new FormData();\n        formData.append(\"file\", this.selectedFile);\n        formData.append(\"poi_category\", this.selectedPoi);\n        ApiService.post(\"/custom-data/poi\", formData).then(function () {\n          _this3.$store.dispatch(\"app/\".concat(GET_USER_CUSTOM_DATA));\n\n          _this3.clear();\n\n          _this3.show = false;\n        }).catch(function (error) {\n          if (!error.response) {\n            _this3.errorMessage = \"An error occurred while uploading file\";\n          }\n\n          if (error.response.data === \"Internal Server Error\") {\n            _this3.errorMessage = \"An error occurred while uploading file\";\n          }\n\n          if (error.response.data.msg) {\n            _this3.errorMessage = error.response.data.msg;\n          }\n\n          if (error.response.data.detail) {\n            _this3.errorMessage = error.response.data.detail;\n          }\n        }).finally(function () {\n          _this3.isUploadBusy = false;\n          _this3.selectedFile = null;\n\n          _this3.clearInputFile();\n        });\n      }\n    },\n    categoryNameInput: function categoryNameInput() {\n      var _this4 = this;\n\n      var existingPoi = this.poiList.filter(function (p) {\n        return p && p.type === _this4.selectedPoi;\n      });\n\n      if (existingPoi.length > 0) {\n        this.isValid = false;\n      } else {\n        this.isValid = true;\n      }\n    },\n    clear: function clear() {\n      this.isValid = true;\n      this.selectedFile = null;\n      this.isSelecting = false;\n      this.isCustom = false;\n      this.selectedPoi = null;\n      this.errorMessage = null;\n    },\n    clearInputFile: function clearInputFile() {\n      var f = document.getElementById(\"custom-data-input-file-el\");\n\n      if (f.value) {\n        try {\n          f.value = \"\"; //for IE11, latest Chrome/Firefox/Opera...\n        } catch (err) {\n          console.log(err);\n        }\n\n        if (f.value) {\n          //for IE5 ~ IE10\n          var form = document.createElement(\"form\"),\n              parentNode = f.parentNode,\n              ref = f.nextSibling;\n          form.appendChild(f);\n          form.reset();\n          parentNode.insertBefore(f, ref);\n        }\n      }\n    }\n  },\n  watch: {\n    visible: function visible(_visible) {\n      if (!_visible) {\n        this.clear();\n      }\n    }\n  }\n};",{"version":3,"sources":["UserDataUploadDialog.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-dialog v-model=\"show\" persistent scrollable max-width=\"550px\">\n    <v-card>\n      <v-app-bar :color=\"appColor.primary\" dark>\n        <v-app-bar-nav-icon\n          ><v-icon>fas fa-cloud-arrow-up</v-icon></v-app-bar-nav-icon\n        >\n        <v-toolbar-title>{{\n          $t(\"appBar.dataUpload.dialog.uploadData\")\n        }}</v-toolbar-title>\n        <v-spacer></v-spacer>\n        <v-app-bar-nav-icon @click.stop=\"show = false\"\n          ><v-icon>close</v-icon></v-app-bar-nav-icon\n        >\n      </v-app-bar>\n      <vue-scroll>\n        <v-card-text primary-title>\n          <h3>{{ $t(\"appBar.dataUpload.dialog.uploadPointOfInterest\") }}</h3>\n          <v-select\n            :label=\"$t('appBar.dataUpload.dialog.selectCategory')\"\n            v-if=\"!isCustom\"\n            solo\n            class=\"mt-2 mb-0 pb-0\"\n            item-value=\"type\"\n            v-model=\"selectedPoi\"\n            :items=\"poiList\"\n          >\n            <template slot=\"selection\" slot-scope=\"{ item }\">\n              <v-row>\n                <v-col cols=\"3\">\n                  <i\n                    :class=\"\n                      item.icon +\n                        ' v-icon notranslate ml-1 v-icon--dense theme--light grey--text ml-1'\n                    \"\n                    :style=\"\n                      Array.isArray(item.color) && item.color.length > 1\n                        ? `--fa-primary-color: ${item.color[0]};--fa-secondary-color: ${item.color[1]};width:20px;`\n                        : `color: ${item.color} !important;width:20px;`\n                    \"\n                  >\n                  </i>\n                </v-col>\n                <v-col cols=\"9\"\n                  ><span class=\"cb-item\">{{\n                    $te(`pois.${item.type}`)\n                      ? $t(`pois.${item.type}`)\n                      : item.type\n                  }}</span></v-col\n                >\n              </v-row>\n            </template>\n            <template slot=\"item\" slot-scope=\"{ item }\">\n              <v-row>\n                <v-col cols=\"2\">\n                  <i\n                    :class=\"\n                      item.icon +\n                        ' v-icon notranslate ml-1 v-icon--dense theme--light grey--text ml-1'\n                    \"\n                    :style=\"\n                      Array.isArray(item.color) && item.color.length > 1\n                        ? `--fa-primary-color: ${item.color[0]};--fa-secondary-color: ${item.color[1]};width:20px;`\n                        : `color: ${item.color} !important;width:20px;`\n                    \"\n                  >\n                  </i>\n                </v-col>\n                <v-col cols=\"10\"\n                  ><span class=\"cb-item\">{{\n                    $te(`pois.${item.type}`)\n                      ? $t(`pois.${item.type}`)\n                      : item.type\n                  }}</span></v-col\n                >\n              </v-row>\n            </template>\n          </v-select>\n          <v-checkbox\n            class=\"pb-0 mb-0 mt-3\"\n            v-model=\"isCustom\"\n            :label=\"$t(`appBar.dataUpload.dialog.customCategory`)\"\n            @change=\"isCustomClicked\"\n          ></v-checkbox>\n          <v-alert v-if=\"!isValid\" dense outlined type=\"error\">\n            {{ $t(\"appBar.dataUpload.dialog.invalidCategory\") }}\n          </v-alert>\n          <v-text-field\n            v-if=\"isCustom\"\n            label=\"Category Name\"\n            v-model=\"selectedPoi\"\n            outlined\n            min=\"2\"\n            max=\"50\"\n            :rules=\"[minLength]\"\n            lazy-validation\n            @input=\"categoryNameInput\"\n          ></v-text-field>\n\n          <v-alert v-if=\"errorMessage\" dense outlined type=\"error\">\n            {{ errorMessage }}\n          </v-alert>\n\n          <v-btn\n            :color=\"appColor.primary\"\n            class=\"white--text\"\n            depressed\n            :disabled=\"!selectedPoi || !isValid || isUploadBusy\"\n            :loading=\"isSelecting\"\n            @click=\"onUploadButtonClick\"\n          >\n            <v-icon left>\n              cloud_upload\n            </v-icon>\n            {{ $t(`appBar.dataUpload.dialog.browseYourFiles`) }}\n          </v-btn>\n          <input\n            id=\"custom-data-input-file-el\"\n            ref=\"uploader\"\n            class=\"d-none\"\n            type=\"file\"\n            accept=\".geojson,.zip\"\n            @change=\"onFileChanged\"\n          />\n          <p v-if=\"isUploadBusy\" class=\"mt-4 mb-1 sub-header\">\n            Uploading file\n          </p>\n          <v-progress-linear\n            height=\"2\"\n            v-if=\"isUploadBusy\"\n            indeterminate\n            :color=\"appColor.secondary\"\n            class=\"mb-6 mt-0 pt-0\"\n          ></v-progress-linear>\n        </v-card-text>\n      </vue-scroll>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport ApiService from \"../../services/api.service\";\nimport { GET_USER_CUSTOM_DATA } from \"../../store/actions.type\";\nexport default {\n  data: () => ({\n    isBusy: false,\n    isValid: true,\n    selectedFile: null,\n    isSelecting: false,\n    isCustom: false,\n    selectedPoi: null,\n    isUploadBusy: false,\n    filesizeLimit: 1e8,\n    errorMessage: null,\n    minLength: val => {\n      if (val < 2) return \"Please enter a text with at least 1 characters\";\n      return true;\n    }\n  }),\n  props: [\"visible\"],\n  computed: {\n    show: {\n      get() {\n        return this.visible;\n      },\n      set(value) {\n        if (!value) {\n          this.$emit(\"close\");\n        }\n      }\n    },\n    ...mapGetters(\"app\", {\n      appColor: \"appColor\",\n      poiIcons: \"poiIcons\",\n      poisConfig: \"poisConfig\"\n    }),\n    poiList() {\n      const poiIcons = this.poiIcons;\n      const poiNames = Object.keys(poiIcons);\n      return poiNames.map(poiName => {\n        if (this.poisConfig[poiName]) {\n          return {\n            type: poiName,\n            icon: poiIcons[poiName].icon,\n            color: poiIcons[poiName].color\n          };\n        }\n      });\n    }\n  },\n  methods: {\n    isCustomClicked() {\n      this.selectedPoi = null;\n      this.isValid = true;\n    },\n    onUploadButtonClick() {\n      this.isSelecting = true;\n      window.addEventListener(\n        \"focus\",\n        () => {\n          this.isSelecting = false;\n        },\n        { once: true }\n      );\n\n      this.$refs.uploader.click();\n    },\n    onFileChanged(e) {\n      this.selectedFile = e.target.files[0];\n      this.errorMessage = null;\n      this.isUploadBusy = true;\n      if (this.selectedFile) {\n        if (\n          this.selectedFile.size > this.filesizeLimit //100mb TODO: Get from config / user settings\n        ) {\n          this.isUploadBusy = false;\n          this.errorMessage = this.$t(\n            \"appBar.dataUpload.dialog.sizeLimitExceeded\"\n          );\n          this.selectedFile = null;\n          return;\n        }\n        const formData = new FormData();\n        formData.append(\"file\", this.selectedFile);\n        formData.append(\"poi_category\", this.selectedPoi);\n        ApiService.post(`/custom-data/poi`, formData)\n          .then(() => {\n            this.$store.dispatch(`app/${GET_USER_CUSTOM_DATA}`);\n            this.clear();\n            this.show = false;\n          })\n          .catch(error => {\n            if (!error.response) {\n              this.errorMessage = \"An error occurred while uploading file\";\n            }\n            if (error.response.data === \"Internal Server Error\") {\n              this.errorMessage = \"An error occurred while uploading file\";\n            }\n            if (error.response.data.msg) {\n              this.errorMessage = error.response.data.msg;\n            }\n            if (error.response.data.detail) {\n              this.errorMessage = error.response.data.detail;\n            }\n          })\n          .finally(() => {\n            this.isUploadBusy = false;\n            this.selectedFile = null;\n            this.clearInputFile();\n          });\n      }\n    },\n    categoryNameInput() {\n      const existingPoi = this.poiList.filter(\n        p => p && p.type === this.selectedPoi\n      );\n      if (existingPoi.length > 0) {\n        this.isValid = false;\n      } else {\n        this.isValid = true;\n      }\n    },\n    clear() {\n      this.isValid = true;\n      this.selectedFile = null;\n      this.isSelecting = false;\n      this.isCustom = false;\n      this.selectedPoi = null;\n      this.errorMessage = null;\n    },\n    clearInputFile() {\n      const f = document.getElementById(\"custom-data-input-file-el\");\n      if (f.value) {\n        try {\n          f.value = \"\"; //for IE11, latest Chrome/Firefox/Opera...\n        } catch (err) {\n          console.log(err);\n        }\n        if (f.value) {\n          //for IE5 ~ IE10\n          var form = document.createElement(\"form\"),\n            parentNode = f.parentNode,\n            ref = f.nextSibling;\n          form.appendChild(f);\n          form.reset();\n          parentNode.insertBefore(f, ref);\n        }\n      }\n    }\n  },\n  watch: {\n    visible(visible) {\n      if (!visible) {\n        this.clear();\n      }\n    }\n  }\n};\n</script>\n\n<style scoped></style>\n"],"sourceRoot":"src/components/core"}]}