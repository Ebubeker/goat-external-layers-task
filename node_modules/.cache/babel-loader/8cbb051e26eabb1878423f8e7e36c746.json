{"remainingRequest":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/eslint-loader/index.js??ref--13-0!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/utils/FontSymbol.js","dependencies":[{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/utils/FontSymbol.js","mtime":1657636289863},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js","mtime":1657636581841},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js","mtime":1657636581481},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/eslint-loader/index.js","mtime":1657636581253}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.fill\";\n\n/*\tCopyright (c) 2015 Jean-Marc VIGLINO, \n  released under the CeCILL-B license (French BSD license)\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\n*/\nimport ol_ext_inherits from \"./ext\";\nimport ol_style_RegularShape from \"ol/style/RegularShape\";\nimport ol_style_Image from \"ol/style/Image\";\nimport { asString as ol_color_asString } from \"ol/color\";\n/**\n * @classdesc\n * A marker style to use with font symbols.\n *\n * @constructor\n * @param {} options Options.\n *  @param {string} [options.color] default #000\n *  @param {string} options.glyph the glyph name or a char to display as symbol.\n *    The name must be added using the {@link ol.style.FontSymbol.addDefs} function.\n *  @param {string} [options.text] a text to display as a glyph\n *  @param {string} [options.font] font to use with the text option\n *  @param {string} options.form\n * \t  none|circle|poi|bubble|marker|coma|shield|blazon|bookmark|hexagon|diamond|triangle|sign|ban|lozenge|square\n * \t  a form that will enclose the glyph, default none\n *  @param {number} options.radius\n *  @param {number} options.rotation\n *  @param {boolean} options.rotateWithView\n *  @param {number} [options.opacity=1]\n *  @param {number} [options.fontSize=1] default 1\n *  @param {string} [options.fontStyle] the font style (bold, italic, bold italic, etc), default none\n *  @param {boolean} options.gradient true to display a gradient on the symbol\n *  @param {number} [options.offsetX=0] default 0\n *  @param {number} [options.offsetY=0] default 0\n *  @param {_ol_style_Fill_} options.fill\n *  @param {_ol_style_Stroke_} options.stroke\n * @extends {ol_style_RegularShape}\n * @implements {ol.structs.IHasChecksum}\n * @api\n */\n\nvar ol_style_FontSymbol = function ol_style_FontSymbol(options) {\n  options = options || {};\n  var strokeWidth = 0;\n\n  if (options.stroke) {\n    strokeWidth = options.stroke.getWidth();\n  }\n\n  ol_style_RegularShape.call(this, {\n    radius: options.radius,\n    fill: options.fill,\n    rotation: options.rotation,\n    rotateWithView: options.rotateWithView\n  });\n  if (typeof options.opacity == \"number\") this.setOpacity(options.opacity);\n  this.color_ = options.color;\n  this.fontSize_ = options.fontSize || 1;\n  this.fontStyle_ = options.fontStyle || \"\";\n  this.stroke_ = options.stroke;\n  this.fill_ = options.fill;\n  this.radius_ = options.radius - strokeWidth;\n  this.form_ = options.form || \"none\";\n  this.gradient_ = options.gradient;\n  this.offset_ = [options.offsetX ? options.offsetX : 0, options.offsetY ? options.offsetY : 0];\n  if (options.glyph) this.glyph_ = this.getGlyph(options.glyph);else this.glyph_ = this.getTextGlyph(options.text || \"\", options.font);\n  this.renderMarker_();\n};\n\nol_ext_inherits(ol_style_FontSymbol, ol_style_RegularShape);\n/** Cool stuff to get the image symbol for a style\n */\n\nol_style_Image.prototype.getImagePNG = function () {\n  var canvas = this.getImage();\n\n  if (canvas) {\n    try {\n      return canvas.toDataURL(\"image/png\");\n    } catch (e) {\n      return false;\n    }\n  } else {\n    return false;\n  }\n};\n/** Font defs\n */\n\n\nol_style_FontSymbol.prototype.defs = {\n  fonts: {},\n  glyphs: {}\n};\n/** Static function : add new font defs\n * @param {String|Object} font the font desciption\n * @param {} glyphs a key / value list of glyph definitions.\n * \t\tEach key is the name of the glyph,\n * \t\tthe value is an object that code the font, the caracter code,\n * \t\tthe name and a search string for the glyph.\n */\n\nol_style_FontSymbol.addDefs = function (font, glyphs) {\n  var thefont = font;\n  if (typeof font == \"string\") thefont = {\n    font: font,\n    name: font,\n    copyright: \"\"\n  };\n\n  if (!thefont.font || typeof thefont.font !== \"string\") {\n    console.log(\"bad font def\");\n    return;\n  }\n\n  var fontname = thefont.font;\n  ol_style_FontSymbol.prototype.defs.fonts[fontname] = thefont;\n\n  for (var i in glyphs) {\n    var g = glyphs[i];\n    if (typeof g === \"string\" && g.length == 1) g = {\n      char: g\n    };\n    ol_style_FontSymbol.prototype.defs.glyphs[i] = {\n      font: thefont.font,\n      char: g.char || \"\" + String.fromCharCode(g.code) || \"\",\n      theme: g.theme || thefont.name,\n      name: g.name || i,\n      search: g.search || \"\"\n    };\n  }\n};\n/** Clones the style.\n * @return {ol_style_FontSymbol}\n */\n\n\nol_style_FontSymbol.prototype.clone = function () {\n  var g = new ol_style_FontSymbol({\n    glyph: \"\",\n    color: this.color_,\n    fontSize: this.fontSize_,\n    fontStyle: this.fontStyle_,\n    stroke: this.stroke_,\n    fill: this.fill_,\n    radius: this.radius_ + (this.stroke_ ? this.stroke_.getWidth() : 0),\n    form: this.form_,\n    gradient: this.gradient_,\n    offsetX: this.offset_[0],\n    offsetY: this.offset_[1],\n    opacity: this.getOpacity(),\n    rotation: this.getRotation(),\n    rotateWithView: this.getRotateWithView()\n  });\n  g.setScale(this.getScale());\n  g.glyph_ = this.glyph_;\n  g.renderMarker_();\n  return g;\n};\n/** Get the fill style for the symbol.\n * @return {ol_style_Fill} Fill style.\n * @api\n */\n\n\nol_style_FontSymbol.prototype.getFill = function () {\n  return this.fill_;\n};\n/** Get the stroke style for the symbol.\n * @return {_ol_style_Stroke_} Stroke style.\n * @api\n */\n\n\nol_style_FontSymbol.prototype.getStroke = function () {\n  return this.stroke_;\n};\n/** Get the glyph definition for the symbol.\n * @param {string|undefined} name a glyph name to get the definition, default return the glyph definition for the style.\n * @return {*}\n * @api\n */\n\n\nol_style_FontSymbol.prototype.getGlyph = function (name) {\n  if (name) return ol_style_FontSymbol.prototype.defs.glyphs[name] || {\n    font: \"sans-serif\",\n    char: name.charAt(0),\n    theme: \"none\",\n    name: \"none\",\n    search: \"\"\n  };else return this.glyph_;\n};\n/** Get glyph definition given a text and a font\n * @param {string|undefined} text\n * @param {string} [font] the font for the text\n * @return {*}\n * @api\n */\n\n\nol_style_FontSymbol.prototype.getTextGlyph = function (text, font) {\n  return {\n    font: font || \"sans-serif\",\n    char: String(text),\n    theme: \"none\",\n    name: \"none\",\n    search: \"\"\n  };\n};\n/**\n * Get the glyph name.\n * @return {string} the name\n * @api\n */\n\n\nol_style_FontSymbol.prototype.getGlyphName = function () {\n  for (var i in ol_style_FontSymbol.prototype.defs.glyphs) {\n    if (ol_style_FontSymbol.prototype.defs.glyphs[i] === this.glyph_) return i;\n  }\n\n  return \"\";\n};\n/**\n * Get the stroke style for the symbol.\n * @return {_ol_style_Stroke_} Stroke style.\n * @api\n */\n\n\nol_style_FontSymbol.prototype.getFontInfo = function (glyph) {\n  return ol_style_FontSymbol.prototype.defs.fonts[glyph.font];\n};\n/** @private\n */\n\n\nol_style_FontSymbol.prototype.renderMarker_ = function (pixelratio) {\n  if (!pixelratio) {\n    if (this.getPixelRatio) {\n      pixelratio = window.devicePixelRatio;\n      this.renderMarker_(pixelratio);\n      if (this.getPixelRatio && pixelratio !== 1) this.renderMarker_(1);\n    } else {\n      this.renderMarker_(1);\n    }\n\n    return;\n  }\n\n  var strokeStyle;\n  var strokeWidth = 0;\n\n  if (this.stroke_) {\n    strokeStyle = ol_color_asString(this.stroke_.getColor());\n    strokeWidth = this.stroke_.getWidth();\n  } // get canvas\n\n\n  var canvas = this.getImage(pixelratio); //console.log(this.getImage().width+\" / \"+(2 * (this.radius_ + strokeWidth) + 1));\n\n  /** @type {ol_style_FontSymbol.RenderOptions} */\n\n  var renderOptions = {\n    strokeStyle: strokeStyle,\n    strokeWidth: strokeWidth,\n    size: canvas.width / pixelratio\n  }; // draw the circle on the canvas\n\n  var context = canvas.getContext(\"2d\");\n  context.clearRect(0, 0, canvas.width, canvas.height);\n  this.drawMarker_(renderOptions, context, 0, 0, pixelratio); // Set anchor / displacement\n\n  if (this.setDisplacement) {\n    this.setDisplacement([this.offset_[0], -this.offset_[1]]);\n  } else {\n    var a = this.getAnchor();\n    a[0] = canvas.width / 2 - this.offset_[0];\n    a[1] = canvas.width / 2 - this.offset_[1];\n  }\n};\n/**\n * @private\n * @param {ol_style_FontSymbol.RenderOptions} renderOptions\n * @param {CanvasRenderingContext2D} context\n */\n\n\nol_style_FontSymbol.prototype.drawPath_ = function (renderOptions, context) {\n  var s = 2 * this.radius_ + renderOptions.strokeWidth + 1;\n  var w = renderOptions.strokeWidth / 2;\n  var c = renderOptions.size / 2; // Transfo to place the glyph at the right place\n\n  var transfo = {\n    fac: 1,\n    posX: renderOptions.size / 2,\n    posY: renderOptions.size / 2\n  };\n  context.lineJoin = \"round\";\n  context.beginPath(); // Draw the path with the form\n\n  switch (this.form_) {\n    case \"none\":\n      {\n        transfo.fac = 1;\n        break;\n      }\n\n    case \"circle\":\n    case \"ban\":\n      {\n        context.arc(c, c, s / 2, 0, 2 * Math.PI, true);\n        break;\n      }\n\n    case \"poi\":\n      {\n        context.arc(c, c - 0.4 * this.radius_, 0.6 * this.radius_, 0.15 * Math.PI, 0.85 * Math.PI, true);\n        context.lineTo(c - 0.89 * 0.05 * s, (0.95 + 0.45 * 0.05) * s + w);\n        context.arc(c, 0.95 * s + w, 0.05 * s, 0.85 * Math.PI, 0.15 * Math.PI, true);\n        transfo = {\n          fac: 0.45,\n          posX: c,\n          posY: c - 0.35 * this.radius_\n        };\n        break;\n      }\n\n    case \"bubble\":\n      {\n        context.arc(c, c - 0.2 * this.radius_, 0.8 * this.radius_, 0.4 * Math.PI, 0.6 * Math.PI, true);\n        context.lineTo(0.5 * s + w, s + w);\n        transfo = {\n          fac: 0.7,\n          posX: c,\n          posY: c - 0.2 * this.radius_\n        };\n        break;\n      }\n\n    case \"marker\":\n      {\n        context.arc(c, c - 0.2 * this.radius_, 0.8 * this.radius_, 0.25 * Math.PI, 0.75 * Math.PI, true);\n        context.lineTo(0.5 * s + w, s + w);\n        transfo = {\n          fac: 0.7,\n          posX: c,\n          posY: c - 0.2 * this.radius_\n        };\n        break;\n      }\n\n    case \"coma\":\n      {\n        context.moveTo(c + 0.8 * this.radius_, c - 0.2 * this.radius_);\n        context.quadraticCurveTo(0.95 * s + w, 0.75 * s + w, 0.5 * s + w, s + w);\n        context.arc(c, c - 0.2 * this.radius_, 0.8 * this.radius_, 0.45 * Math.PI, 0, false);\n        transfo = {\n          fac: 0.7,\n          posX: c,\n          posY: c - 0.2 * this.radius_\n        };\n        break;\n      }\n\n    default:\n      {\n        var pts;\n\n        switch (this.form_) {\n          case \"shield\":\n            {\n              pts = [0.05, 0, 0.95, 0, 0.95, 0.8, 0.5, 1, 0.05, 0.8, 0.05, 0];\n              transfo.posY = 0.45 * s + w;\n              break;\n            }\n\n          case \"blazon\":\n            {\n              pts = [0.1, 0, 0.9, 0, 0.9, 0.8, 0.6, 0.8, 0.5, 1, 0.4, 0.8, 0.1, 0.8, 0.1, 0];\n              transfo.fac = 0.8;\n              transfo.posY = 0.4 * s + w;\n              break;\n            }\n\n          case \"bookmark\":\n            {\n              pts = [0.05, 0, 0.95, 0, 0.95, 1, 0.5, 0.8, 0.05, 1, 0.05, 0];\n              transfo.fac = 0.9;\n              transfo.posY = 0.4 * s + w;\n              break;\n            }\n\n          case \"hexagon\":\n            {\n              pts = [0.05, 0.2, 0.5, 0, 0.95, 0.2, 0.95, 0.8, 0.5, 1, 0.05, 0.8, 0.05, 0.2];\n              transfo.fac = 0.9;\n              transfo.posY = 0.5 * s + w;\n              break;\n            }\n\n          case \"diamond\":\n            {\n              pts = [0.25, 0, 0.75, 0, 1, 0.2, 1, 0.4, 0.5, 1, 0, 0.4, 0, 0.2, 0.25, 0];\n              transfo.fac = 0.75;\n              transfo.posY = 0.35 * s + w;\n              break;\n            }\n\n          case \"triangle\":\n            {\n              pts = [0, 0, 1, 0, 0.5, 1, 0, 0];\n              transfo.fac = 0.6;\n              transfo.posY = 0.3 * s + w;\n              break;\n            }\n\n          case \"sign\":\n            {\n              pts = [0.5, 0.05, 1, 0.95, 0, 0.95, 0.5, 0.05];\n              transfo.fac = 0.7;\n              transfo.posY = 0.65 * s + w;\n              break;\n            }\n\n          case \"lozenge\":\n            {\n              pts = [0.5, 0, 1, 0.5, 0.5, 1, 0, 0.5, 0.5, 0];\n              transfo.fac = 0.7;\n              break;\n            }\n\n          case \"square\":\n          default:\n            {\n              pts = [0, 0, 1, 0, 1, 1, 0, 1, 0, 0];\n              break;\n            }\n        }\n\n        for (var i = 0; i < pts.length; i += 2) {\n          context.lineTo(pts[i] * s + w, pts[i + 1] * s + w);\n        }\n      }\n  }\n\n  context.closePath();\n  return transfo;\n};\n/**\n * @private\n * @param {ol_style_FontSymbol.RenderOptions} renderOptions\n * @param {CanvasRenderingContext2D} context\n * @param {number} x The origin for the symbol (x).\n * @param {number} y The origin for the symbol (y).\n */\n\n\nol_style_FontSymbol.prototype.drawMarker_ = function (renderOptions, context, x, y, pixelratio) {\n  var fcolor = this.fill_ ? this.fill_.getColor() : \"#000\";\n  var scolor = this.stroke_ ? this.stroke_.getColor() : \"#000\";\n\n  if (this.form_ == \"none\" && this.stroke_ && this.fill_) {\n    scolor = this.fill_.getColor();\n    fcolor = this.stroke_.getColor();\n  } // reset transform\n\n\n  context.setTransform(pixelratio, 0, 0, pixelratio, 0, 0); // then move to (x, y)\n\n  context.translate(x, y);\n  var tr = this.drawPath_(renderOptions, context, pixelratio);\n\n  if (this.fill_) {\n    if (this.gradient_ && this.form_ != \"none\") {\n      var grd = context.createLinearGradient(0, 0, renderOptions.size / 2, renderOptions.size);\n      grd.addColorStop(1, ol_color_asString(fcolor));\n      grd.addColorStop(0, ol_color_asString(scolor));\n      context.fillStyle = grd;\n    } else {\n      context.fillStyle = ol_color_asString(fcolor);\n    }\n\n    context.fill();\n  }\n\n  if (this.stroke_ && renderOptions.strokeWidth) {\n    context.strokeStyle = renderOptions.strokeStyle;\n    context.lineWidth = renderOptions.strokeWidth;\n    context.stroke();\n  } // Draw the symbol\n\n\n  if (this.glyph_.char) {\n    context.font = this.fontStyle_ + \" \" + 2 * tr.fac * this.radius_ * this.fontSize_ + \"px \" + this.glyph_.font;\n    context.strokeStyle = context.fillStyle;\n    context.lineWidth = renderOptions.strokeWidth * (this.form_ == \"none\" ? 2 : 1);\n    context.fillStyle = ol_color_asString(this.color_ || scolor);\n    context.textAlign = \"center\";\n    context.textBaseline = \"middle\";\n    var t = this.glyph_.char;\n    if (renderOptions.strokeWidth && scolor != \"transparent\") context.strokeText(t, tr.posX, tr.posY);\n    context.fillText(t, tr.posX, tr.posY);\n  }\n\n  if (this.form_ == \"ban\" && this.stroke_ && renderOptions.strokeWidth) {\n    context.strokeStyle = renderOptions.strokeStyle;\n    context.lineWidth = renderOptions.strokeWidth;\n    var r = this.radius_ + renderOptions.strokeWidth;\n    var d = this.radius_ * Math.cos(Math.PI / 4);\n    context.moveTo(r + d, r - d);\n    context.lineTo(r - d, r + d);\n    context.stroke();\n  }\n};\n/**\n * @inheritDoc\n */\n\n\nol_style_FontSymbol.prototype.getChecksum = function () {\n  var strokeChecksum = this.stroke_ !== null ? this.stroke_.getChecksum() : \"-\";\n  var fillChecksum = this.fill_ !== null ? this.fill_.getChecksum() : \"-\";\n  var recalculate = this.checksums_ === null || strokeChecksum != this.checksums_[1] || fillChecksum != this.checksums_[2] || this.radius_ != this.checksums_[3] || this.form_ + \"-\" + this.glyphs_ != this.checksums_[4];\n\n  if (recalculate) {\n    var checksum = \"c\" + strokeChecksum + fillChecksum + (this.radius_ !== void 0 ? this.radius_.toString() : \"-\") + this.form_ + \"-\" + this.glyphs_;\n    this.checksums_ = [checksum, strokeChecksum, fillChecksum, this.radius_, this.form_ + \"-\" + this.glyphs_];\n  }\n\n  return this.checksums_[0];\n};\n\nexport default ol_style_FontSymbol;",{"version":3,"sources":["/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/utils/FontSymbol.js"],"names":["ol_ext_inherits","ol_style_RegularShape","ol_style_Image","asString","ol_color_asString","ol_style_FontSymbol","options","strokeWidth","stroke","getWidth","call","radius","fill","rotation","rotateWithView","opacity","setOpacity","color_","color","fontSize_","fontSize","fontStyle_","fontStyle","stroke_","fill_","radius_","form_","form","gradient_","gradient","offset_","offsetX","offsetY","glyph","glyph_","getGlyph","getTextGlyph","text","font","renderMarker_","prototype","getImagePNG","canvas","getImage","toDataURL","e","defs","fonts","glyphs","addDefs","thefont","name","copyright","console","log","fontname","i","g","length","char","String","fromCharCode","code","theme","search","clone","getOpacity","getRotation","getRotateWithView","setScale","getScale","getFill","getStroke","charAt","getGlyphName","getFontInfo","pixelratio","getPixelRatio","window","devicePixelRatio","strokeStyle","getColor","renderOptions","size","width","context","getContext","clearRect","height","drawMarker_","setDisplacement","a","getAnchor","drawPath_","s","w","c","transfo","fac","posX","posY","lineJoin","beginPath","arc","Math","PI","lineTo","moveTo","quadraticCurveTo","pts","closePath","x","y","fcolor","scolor","setTransform","translate","tr","grd","createLinearGradient","addColorStop","fillStyle","lineWidth","textAlign","textBaseline","t","strokeText","fillText","r","d","cos","getChecksum","strokeChecksum","fillChecksum","recalculate","checksums_","glyphs_","checksum","toString"],"mappings":"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","sourcesContent":["/*\tCopyright (c) 2015 Jean-Marc VIGLINO, \n  released under the CeCILL-B license (French BSD license)\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\n*/\n\nimport ol_ext_inherits from \"./ext\";\nimport ol_style_RegularShape from \"ol/style/RegularShape\";\nimport ol_style_Image from \"ol/style/Image\";\nimport { asString as ol_color_asString } from \"ol/color\";\n\n/**\n * @classdesc\n * A marker style to use with font symbols.\n *\n * @constructor\n * @param {} options Options.\n *  @param {string} [options.color] default #000\n *  @param {string} options.glyph the glyph name or a char to display as symbol.\n *    The name must be added using the {@link ol.style.FontSymbol.addDefs} function.\n *  @param {string} [options.text] a text to display as a glyph\n *  @param {string} [options.font] font to use with the text option\n *  @param {string} options.form\n * \t  none|circle|poi|bubble|marker|coma|shield|blazon|bookmark|hexagon|diamond|triangle|sign|ban|lozenge|square\n * \t  a form that will enclose the glyph, default none\n *  @param {number} options.radius\n *  @param {number} options.rotation\n *  @param {boolean} options.rotateWithView\n *  @param {number} [options.opacity=1]\n *  @param {number} [options.fontSize=1] default 1\n *  @param {string} [options.fontStyle] the font style (bold, italic, bold italic, etc), default none\n *  @param {boolean} options.gradient true to display a gradient on the symbol\n *  @param {number} [options.offsetX=0] default 0\n *  @param {number} [options.offsetY=0] default 0\n *  @param {_ol_style_Fill_} options.fill\n *  @param {_ol_style_Stroke_} options.stroke\n * @extends {ol_style_RegularShape}\n * @implements {ol.structs.IHasChecksum}\n * @api\n */\nvar ol_style_FontSymbol = function(options) {\n  options = options || {};\n  var strokeWidth = 0;\n  if (options.stroke) {\n    strokeWidth = options.stroke.getWidth();\n  }\n  ol_style_RegularShape.call(this, {\n    radius: options.radius,\n    fill: options.fill,\n    rotation: options.rotation,\n    rotateWithView: options.rotateWithView\n  });\n\n  if (typeof options.opacity == \"number\") this.setOpacity(options.opacity);\n  this.color_ = options.color;\n  this.fontSize_ = options.fontSize || 1;\n  this.fontStyle_ = options.fontStyle || \"\";\n  this.stroke_ = options.stroke;\n  this.fill_ = options.fill;\n  this.radius_ = options.radius - strokeWidth;\n  this.form_ = options.form || \"none\";\n  this.gradient_ = options.gradient;\n  this.offset_ = [\n    options.offsetX ? options.offsetX : 0,\n    options.offsetY ? options.offsetY : 0\n  ];\n\n  if (options.glyph) this.glyph_ = this.getGlyph(options.glyph);\n  else this.glyph_ = this.getTextGlyph(options.text || \"\", options.font);\n\n  this.renderMarker_();\n};\nol_ext_inherits(ol_style_FontSymbol, ol_style_RegularShape);\n\n/** Cool stuff to get the image symbol for a style\n */\nol_style_Image.prototype.getImagePNG = function() {\n  var canvas = this.getImage();\n  if (canvas) {\n    try {\n      return canvas.toDataURL(\"image/png\");\n    } catch (e) {\n      return false;\n    }\n  } else {\n    return false;\n  }\n};\n\n/** Font defs\n */\nol_style_FontSymbol.prototype.defs = { fonts: {}, glyphs: {} };\n\n/** Static function : add new font defs\n * @param {String|Object} font the font desciption\n * @param {} glyphs a key / value list of glyph definitions.\n * \t\tEach key is the name of the glyph,\n * \t\tthe value is an object that code the font, the caracter code,\n * \t\tthe name and a search string for the glyph.\n */\nol_style_FontSymbol.addDefs = function(font, glyphs) {\n  var thefont = font;\n  if (typeof font == \"string\")\n    thefont = { font: font, name: font, copyright: \"\" };\n  if (!thefont.font || typeof thefont.font !== \"string\") {\n    console.log(\"bad font def\");\n    return;\n  }\n  var fontname = thefont.font;\n  ol_style_FontSymbol.prototype.defs.fonts[fontname] = thefont;\n  for (var i in glyphs) {\n    var g = glyphs[i];\n    if (typeof g === \"string\" && g.length == 1) g = { char: g };\n    ol_style_FontSymbol.prototype.defs.glyphs[i] = {\n      font: thefont.font,\n      char: g.char || \"\" + String.fromCharCode(g.code) || \"\",\n      theme: g.theme || thefont.name,\n      name: g.name || i,\n      search: g.search || \"\"\n    };\n  }\n};\n\n/** Clones the style.\n * @return {ol_style_FontSymbol}\n */\nol_style_FontSymbol.prototype.clone = function() {\n  var g = new ol_style_FontSymbol({\n    glyph: \"\",\n    color: this.color_,\n    fontSize: this.fontSize_,\n    fontStyle: this.fontStyle_,\n    stroke: this.stroke_,\n    fill: this.fill_,\n    radius: this.radius_ + (this.stroke_ ? this.stroke_.getWidth() : 0),\n    form: this.form_,\n    gradient: this.gradient_,\n    offsetX: this.offset_[0],\n    offsetY: this.offset_[1],\n    opacity: this.getOpacity(),\n    rotation: this.getRotation(),\n    rotateWithView: this.getRotateWithView()\n  });\n  g.setScale(this.getScale());\n  g.glyph_ = this.glyph_;\n  g.renderMarker_();\n  return g;\n};\n\n/** Get the fill style for the symbol.\n * @return {ol_style_Fill} Fill style.\n * @api\n */\nol_style_FontSymbol.prototype.getFill = function() {\n  return this.fill_;\n};\n\n/** Get the stroke style for the symbol.\n * @return {_ol_style_Stroke_} Stroke style.\n * @api\n */\nol_style_FontSymbol.prototype.getStroke = function() {\n  return this.stroke_;\n};\n\n/** Get the glyph definition for the symbol.\n * @param {string|undefined} name a glyph name to get the definition, default return the glyph definition for the style.\n * @return {*}\n * @api\n */\nol_style_FontSymbol.prototype.getGlyph = function(name) {\n  if (name)\n    return (\n      ol_style_FontSymbol.prototype.defs.glyphs[name] || {\n        font: \"sans-serif\",\n        char: name.charAt(0),\n        theme: \"none\",\n        name: \"none\",\n        search: \"\"\n      }\n    );\n  else return this.glyph_;\n};\n\n/** Get glyph definition given a text and a font\n * @param {string|undefined} text\n * @param {string} [font] the font for the text\n * @return {*}\n * @api\n */\nol_style_FontSymbol.prototype.getTextGlyph = function(text, font) {\n  return {\n    font: font || \"sans-serif\",\n    char: String(text),\n    theme: \"none\",\n    name: \"none\",\n    search: \"\"\n  };\n};\n\n/**\n * Get the glyph name.\n * @return {string} the name\n * @api\n */\nol_style_FontSymbol.prototype.getGlyphName = function() {\n  for (var i in ol_style_FontSymbol.prototype.defs.glyphs) {\n    if (ol_style_FontSymbol.prototype.defs.glyphs[i] === this.glyph_) return i;\n  }\n  return \"\";\n};\n\n/**\n * Get the stroke style for the symbol.\n * @return {_ol_style_Stroke_} Stroke style.\n * @api\n */\nol_style_FontSymbol.prototype.getFontInfo = function(glyph) {\n  return ol_style_FontSymbol.prototype.defs.fonts[glyph.font];\n};\n\n/** @private\n */\nol_style_FontSymbol.prototype.renderMarker_ = function(pixelratio) {\n  if (!pixelratio) {\n    if (this.getPixelRatio) {\n      pixelratio = window.devicePixelRatio;\n      this.renderMarker_(pixelratio);\n      if (this.getPixelRatio && pixelratio !== 1) this.renderMarker_(1);\n    } else {\n      this.renderMarker_(1);\n    }\n    return;\n  }\n  var strokeStyle;\n  var strokeWidth = 0;\n\n  if (this.stroke_) {\n    strokeStyle = ol_color_asString(this.stroke_.getColor());\n    strokeWidth = this.stroke_.getWidth();\n  }\n\n  // get canvas\n  var canvas = this.getImage(pixelratio);\n  //console.log(this.getImage().width+\" / \"+(2 * (this.radius_ + strokeWidth) + 1));\n\n  /** @type {ol_style_FontSymbol.RenderOptions} */\n  var renderOptions = {\n    strokeStyle: strokeStyle,\n    strokeWidth: strokeWidth,\n    size: canvas.width / pixelratio\n  };\n\n  // draw the circle on the canvas\n  var context = canvas.getContext(\"2d\");\n  context.clearRect(0, 0, canvas.width, canvas.height);\n  this.drawMarker_(renderOptions, context, 0, 0, pixelratio);\n\n  // Set anchor / displacement\n  if (this.setDisplacement) {\n    this.setDisplacement([this.offset_[0], -this.offset_[1]]);\n  } else {\n    var a = this.getAnchor();\n    a[0] = canvas.width / 2 - this.offset_[0];\n    a[1] = canvas.width / 2 - this.offset_[1];\n  }\n};\n\n/**\n * @private\n * @param {ol_style_FontSymbol.RenderOptions} renderOptions\n * @param {CanvasRenderingContext2D} context\n */\nol_style_FontSymbol.prototype.drawPath_ = function(renderOptions, context) {\n  var s = 2 * this.radius_ + renderOptions.strokeWidth + 1;\n  var w = renderOptions.strokeWidth / 2;\n  var c = renderOptions.size / 2;\n  // Transfo to place the glyph at the right place\n  var transfo = {\n    fac: 1,\n    posX: renderOptions.size / 2,\n    posY: renderOptions.size / 2\n  };\n  context.lineJoin = \"round\";\n  context.beginPath();\n\n  // Draw the path with the form\n  switch (this.form_) {\n    case \"none\": {\n      transfo.fac = 1;\n      break;\n    }\n    case \"circle\":\n    case \"ban\": {\n      context.arc(c, c, s / 2, 0, 2 * Math.PI, true);\n      break;\n    }\n    case \"poi\": {\n      context.arc(\n        c,\n        c - 0.4 * this.radius_,\n        0.6 * this.radius_,\n        0.15 * Math.PI,\n        0.85 * Math.PI,\n        true\n      );\n      context.lineTo(c - 0.89 * 0.05 * s, (0.95 + 0.45 * 0.05) * s + w);\n      context.arc(\n        c,\n        0.95 * s + w,\n        0.05 * s,\n        0.85 * Math.PI,\n        0.15 * Math.PI,\n        true\n      );\n      transfo = { fac: 0.45, posX: c, posY: c - 0.35 * this.radius_ };\n      break;\n    }\n    case \"bubble\": {\n      context.arc(\n        c,\n        c - 0.2 * this.radius_,\n        0.8 * this.radius_,\n        0.4 * Math.PI,\n        0.6 * Math.PI,\n        true\n      );\n      context.lineTo(0.5 * s + w, s + w);\n      transfo = { fac: 0.7, posX: c, posY: c - 0.2 * this.radius_ };\n      break;\n    }\n    case \"marker\": {\n      context.arc(\n        c,\n        c - 0.2 * this.radius_,\n        0.8 * this.radius_,\n        0.25 * Math.PI,\n        0.75 * Math.PI,\n        true\n      );\n      context.lineTo(0.5 * s + w, s + w);\n      transfo = { fac: 0.7, posX: c, posY: c - 0.2 * this.radius_ };\n      break;\n    }\n    case \"coma\": {\n      context.moveTo(c + 0.8 * this.radius_, c - 0.2 * this.radius_);\n      context.quadraticCurveTo(0.95 * s + w, 0.75 * s + w, 0.5 * s + w, s + w);\n      context.arc(\n        c,\n        c - 0.2 * this.radius_,\n        0.8 * this.radius_,\n        0.45 * Math.PI,\n        0,\n        false\n      );\n      transfo = { fac: 0.7, posX: c, posY: c - 0.2 * this.radius_ };\n      break;\n    }\n    default: {\n      var pts;\n      switch (this.form_) {\n        case \"shield\": {\n          pts = [0.05, 0, 0.95, 0, 0.95, 0.8, 0.5, 1, 0.05, 0.8, 0.05, 0];\n          transfo.posY = 0.45 * s + w;\n          break;\n        }\n        case \"blazon\": {\n          pts = [\n            0.1,\n            0,\n            0.9,\n            0,\n            0.9,\n            0.8,\n            0.6,\n            0.8,\n            0.5,\n            1,\n            0.4,\n            0.8,\n            0.1,\n            0.8,\n            0.1,\n            0\n          ];\n          transfo.fac = 0.8;\n          transfo.posY = 0.4 * s + w;\n          break;\n        }\n        case \"bookmark\": {\n          pts = [0.05, 0, 0.95, 0, 0.95, 1, 0.5, 0.8, 0.05, 1, 0.05, 0];\n          transfo.fac = 0.9;\n          transfo.posY = 0.4 * s + w;\n          break;\n        }\n        case \"hexagon\": {\n          pts = [\n            0.05,\n            0.2,\n            0.5,\n            0,\n            0.95,\n            0.2,\n            0.95,\n            0.8,\n            0.5,\n            1,\n            0.05,\n            0.8,\n            0.05,\n            0.2\n          ];\n          transfo.fac = 0.9;\n          transfo.posY = 0.5 * s + w;\n          break;\n        }\n        case \"diamond\": {\n          pts = [\n            0.25,\n            0,\n            0.75,\n            0,\n            1,\n            0.2,\n            1,\n            0.4,\n            0.5,\n            1,\n            0,\n            0.4,\n            0,\n            0.2,\n            0.25,\n            0\n          ];\n          transfo.fac = 0.75;\n          transfo.posY = 0.35 * s + w;\n          break;\n        }\n        case \"triangle\": {\n          pts = [0, 0, 1, 0, 0.5, 1, 0, 0];\n          transfo.fac = 0.6;\n          transfo.posY = 0.3 * s + w;\n          break;\n        }\n        case \"sign\": {\n          pts = [0.5, 0.05, 1, 0.95, 0, 0.95, 0.5, 0.05];\n          transfo.fac = 0.7;\n          transfo.posY = 0.65 * s + w;\n          break;\n        }\n        case \"lozenge\": {\n          pts = [0.5, 0, 1, 0.5, 0.5, 1, 0, 0.5, 0.5, 0];\n          transfo.fac = 0.7;\n          break;\n        }\n        case \"square\":\n        default: {\n          pts = [0, 0, 1, 0, 1, 1, 0, 1, 0, 0];\n          break;\n        }\n      }\n      for (var i = 0; i < pts.length; i += 2)\n        context.lineTo(pts[i] * s + w, pts[i + 1] * s + w);\n    }\n  }\n\n  context.closePath();\n  return transfo;\n};\n\n/**\n * @private\n * @param {ol_style_FontSymbol.RenderOptions} renderOptions\n * @param {CanvasRenderingContext2D} context\n * @param {number} x The origin for the symbol (x).\n * @param {number} y The origin for the symbol (y).\n */\nol_style_FontSymbol.prototype.drawMarker_ = function(\n  renderOptions,\n  context,\n  x,\n  y,\n  pixelratio\n) {\n  var fcolor = this.fill_ ? this.fill_.getColor() : \"#000\";\n  var scolor = this.stroke_ ? this.stroke_.getColor() : \"#000\";\n  if (this.form_ == \"none\" && this.stroke_ && this.fill_) {\n    scolor = this.fill_.getColor();\n    fcolor = this.stroke_.getColor();\n  }\n  // reset transform\n  context.setTransform(pixelratio, 0, 0, pixelratio, 0, 0);\n\n  // then move to (x, y)\n  context.translate(x, y);\n\n  var tr = this.drawPath_(renderOptions, context, pixelratio);\n\n  if (this.fill_) {\n    if (this.gradient_ && this.form_ != \"none\") {\n      var grd = context.createLinearGradient(\n        0,\n        0,\n        renderOptions.size / 2,\n        renderOptions.size\n      );\n      grd.addColorStop(1, ol_color_asString(fcolor));\n      grd.addColorStop(0, ol_color_asString(scolor));\n      context.fillStyle = grd;\n    } else {\n      context.fillStyle = ol_color_asString(fcolor);\n    }\n    context.fill();\n  }\n  if (this.stroke_ && renderOptions.strokeWidth) {\n    context.strokeStyle = renderOptions.strokeStyle;\n    context.lineWidth = renderOptions.strokeWidth;\n    context.stroke();\n  }\n\n  // Draw the symbol\n  if (this.glyph_.char) {\n    context.font =\n      this.fontStyle_ +\n      \" \" +\n      2 * tr.fac * this.radius_ * this.fontSize_ +\n      \"px \" +\n      this.glyph_.font;\n    context.strokeStyle = context.fillStyle;\n    context.lineWidth =\n      renderOptions.strokeWidth * (this.form_ == \"none\" ? 2 : 1);\n    context.fillStyle = ol_color_asString(this.color_ || scolor);\n    context.textAlign = \"center\";\n    context.textBaseline = \"middle\";\n    var t = this.glyph_.char;\n    if (renderOptions.strokeWidth && scolor != \"transparent\")\n      context.strokeText(t, tr.posX, tr.posY);\n    context.fillText(t, tr.posX, tr.posY);\n  }\n\n  if (this.form_ == \"ban\" && this.stroke_ && renderOptions.strokeWidth) {\n    context.strokeStyle = renderOptions.strokeStyle;\n    context.lineWidth = renderOptions.strokeWidth;\n    var r = this.radius_ + renderOptions.strokeWidth;\n    var d = this.radius_ * Math.cos(Math.PI / 4);\n    context.moveTo(r + d, r - d);\n    context.lineTo(r - d, r + d);\n    context.stroke();\n  }\n};\n\n/**\n * @inheritDoc\n */\nol_style_FontSymbol.prototype.getChecksum = function() {\n  var strokeChecksum = this.stroke_ !== null ? this.stroke_.getChecksum() : \"-\";\n  var fillChecksum = this.fill_ !== null ? this.fill_.getChecksum() : \"-\";\n\n  var recalculate =\n    this.checksums_ === null ||\n    strokeChecksum != this.checksums_[1] ||\n    fillChecksum != this.checksums_[2] ||\n    this.radius_ != this.checksums_[3] ||\n    this.form_ + \"-\" + this.glyphs_ != this.checksums_[4];\n\n  if (recalculate) {\n    var checksum =\n      \"c\" +\n      strokeChecksum +\n      fillChecksum +\n      (this.radius_ !== void 0 ? this.radius_.toString() : \"-\") +\n      this.form_ +\n      \"-\" +\n      this.glyphs_;\n    this.checksums_ = [\n      checksum,\n      strokeChecksum,\n      fillChecksum,\n      this.radius_,\n      this.form_ + \"-\" + this.glyphs_\n    ];\n  }\n\n  return this.checksums_[0];\n};\n\nexport default ol_style_FontSymbol;\n"]}]}