{"remainingRequest":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vuetify-loader/lib/loader.js??ref--19-0!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/components/isochrones/IsochroneThematicData.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/components/isochrones/IsochroneThematicData.vue","mtime":1657636289855},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js","mtime":1657636581841},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js","mtime":1657636581481},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vuetify-loader/lib/loader.js","mtime":1657636582513},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js","mtime":1657636581841},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vue-loader/lib/index.js","mtime":1657636582549}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.set\";\nimport _toConsumableArray from \"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _typeof from \"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/@babel/runtime-corejs2/helpers/esm/typeof\";\nimport \"core-js/modules/web.dom.iterable\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from \"vuex\";\nimport IsochroneUtils from \"../../utils/IsochroneUtils\";\nimport { Draggable } from \"draggable-vue-directive\";\nimport { mapFields } from \"vuex-map-fields\";\nexport default {\n  directives: {\n    Draggable: Draggable\n  },\n  data: function data() {\n    return {\n      isochroneSteps: [],\n      selectedTime: null,\n      search: \"\",\n      isExpanded: true,\n      //Vue windows\\ draggable\n      handleId: \"handle-id\",\n      draggableValue: {\n        handle: undefined,\n        boundingElement: undefined,\n        resetInitialPos: undefined\n      }\n    };\n  },\n  methods: {\n    expand: function expand() {\n      this.isExpanded = !this.isExpanded;\n    },\n    close: function close() {\n      this.isochroneLayer.getSource().getFeatures().forEach(function (f) {\n        f.set(\"highlightFeature\", false);\n      });\n      this.selectedThematicData = null;\n    },\n    getString: function getString(val) {\n      var string = \"\";\n\n      if (_typeof(val) === \"object\" && val.cnt && val.area) {\n        var value = \"\".concat(val.cnt, \" (\").concat(val.area, \" m2)\");\n        string = value;\n      } else {\n        string = val;\n      }\n\n      return string;\n    }\n  },\n  computed: _objectSpread({\n    tableHeaders: function tableHeaders() {\n      var headers;\n\n      if (this.selectedThematicData.calculationType === \"single\") {\n        var pois = this.selectedThematicData.pois;\n        headers = [{\n          text: this.$t(\"isochrones.tableData.table.pois\"),\n          value: \"pois\",\n          sortable: false\n        }];\n        var keys = Object.keys(pois);\n\n        for (var _i = 0, _keys = keys; _i < _keys.length; _i++) {\n          var key = _keys[_i];\n          headers.push({\n            text: IsochroneUtils.getIsochroneAliasFromKey(key),\n            value: key,\n            sortable: false\n          });\n        }\n      } else {\n        headers = [{\n          text: this.$t(\"isochrones.tableData.table.isochrone\"),\n          value: \"isochrone\",\n          sortable: false,\n          width: \"25%\"\n        }, {\n          text: this.$t(\"isochrones.tableData.table.studyArea\"),\n          value: \"studyArea\",\n          sortable: false,\n          width: \"15%\"\n        }, {\n          text: this.$t(\"isochrones.tableData.table.population\"),\n          value: \"population\",\n          sortable: false,\n          width: \"20%\"\n        }, {\n          text: this.$t(\"isochrones.tableData.table.reachedPopulation\"),\n          value: \"reachPopulation\",\n          sortable: false,\n          width: \"20%\"\n        }, {\n          text: this.$t(\"isochrones.tableData.table.shared\"),\n          value: \"shared\",\n          sortable: false,\n          width: \"20%\"\n        }];\n      }\n\n      return headers;\n    },\n    tableItems: function tableItems() {\n      var _this = this;\n\n      var me = this;\n      var items = [];\n\n      if (me.selectedThematicData.calculationType === \"single\") {\n        var pois = me.selectedThematicData.pois;\n        var selectedTime = me.selectedTime;\n        var keys = Object.keys(pois);\n\n        if (keys.length > 0) {\n          var sumPois = pois[keys[0]][selectedTime];\n          var amenityNames = Object.keys(pois[keys[0]][selectedTime]); // Only if double-calculation\n\n          if (keys.length === 2) {\n            var inputAmenityNames = Object.keys(pois[keys[1]][selectedTime]);\n\n            if (Array.isArray(inputAmenityNames)) {\n              amenityNames = _toConsumableArray(new Set([].concat(_toConsumableArray(amenityNames), _toConsumableArray(inputAmenityNames))));\n            }\n          }\n\n          if (sumPois) {\n            //Loop through  amenities\n            amenityNames.forEach(function (amenity) {\n              var isAmenitySelected = _this.poisAois[amenity];\n\n              if (amenity === \"population\") {\n                isAmenitySelected = true;\n              }\n\n              if (isAmenitySelected) {\n                var obj = {\n                  pois: amenity ? _this.$t(\"pois.\".concat(amenity)) : amenity\n                }; //Default or input calculation\n\n                var valueDefault = _this.getString(sumPois[amenity]);\n\n                obj[keys[0]] = valueDefault || \"-\"; //Double calculation\n\n                if (pois[keys[1]]) {\n                  var valueDouble = _this.getString(pois[keys[1]][selectedTime][amenity]);\n\n                  obj[keys[1]] = valueDouble || \"-\";\n                }\n\n                items.push(obj);\n              }\n            });\n          }\n        }\n      } else {\n        if (me.selectedThematicData.multiIsochroneTableData) {\n          items = me.selectedThematicData.multiIsochroneTableData;\n        }\n      } //Sort table rows based on number of amenties || alphabeticaly (only on single calculations)\n\n\n      if (this.selectedThematicData.calculationType === \"single\") {\n        items.sort(function (a, b) {\n          var b_Value = b[Object.keys(b)[0]];\n          var a_Value = a[Object.keys(a)[0]];\n\n          if (b_Value === a_Value) {\n            return a[\"pois\"].localeCompare(b[\"pois\"]);\n          }\n\n          return b_Value - a_Value;\n        });\n      }\n\n      return items;\n    }\n  }, mapGetters(\"isochrones\", {\n    selectedThematicData: \"selectedThematicData\",\n    isochroneLayer: \"isochroneLayer\"\n  }), {}, mapGetters(\"poisaois\", {\n    poisAois: \"poisAois\",\n    selectedPois: \"selectedPois\"\n  }), {}, mapGetters(\"app\", {\n    appColor: \"appColor\"\n  }), {}, mapFields(\"isochrones\", {\n    selectedThematicData: \"selectedThematicData\"\n  })),\n  watch: {\n    selectedThematicData: function selectedThematicData(value) {\n      this.isochroneSteps = [];\n      if (!value) return;\n      var pois = value.pois;\n\n      if (pois) {\n        for (var key in pois) {\n          var obj = pois[key];\n\n          for (var prop in obj) {\n            this.isochroneSteps.push({\n              display: \"\".concat(Math.round(prop / 60), \" min\"),\n              value: \"\".concat(prop)\n            });\n          }\n\n          break;\n        }\n\n        this.selectedTime = this.isochroneSteps.length > 0 ? this.isochroneSteps[this.isochroneSteps.length - 1].value : [];\n      }\n    }\n  },\n  mounted: function mounted() {\n    var element = document.getElementById(\"ol-map-container\");\n    this.draggableValue.resetInitialPos = false;\n    this.draggableValue.boundingElement = element;\n    this.draggableValue.handle = this.$refs[this.handleId];\n  }\n};",{"version":3,"sources":["IsochroneThematicData.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA,SAAA,UAAA,QAAA,MAAA;AACA,OAAA,cAAA;AACA,SAAA,SAAA,QAAA,yBAAA;AACA,SAAA,SAAA,QAAA,iBAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA;AADA,GADA;AAIA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,cAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA,IAFA;AAGA,MAAA,MAAA,EAAA,EAHA;AAIA,MAAA,UAAA,EAAA,IAJA;AAKA;AACA,MAAA,QAAA,EAAA,WANA;AAOA,MAAA,cAAA,EAAA;AACA,QAAA,MAAA,EAAA,SADA;AAEA,QAAA,eAAA,EAAA,SAFA;AAGA,QAAA,eAAA,EAAA;AAHA;AAPA,KAAA;AAAA,GAJA;AAiBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,WAAA,UAAA,GAAA,CAAA,KAAA,UAAA;AACA,KAHA;AAIA,IAAA,KAJA,mBAIA;AACA,WAAA,cAAA,CACA,SADA,GAEA,WAFA,GAGA,OAHA,CAGA,UAAA,CAAA,EAAA;AACA,QAAA,CAAA,CAAA,GAAA,CAAA,kBAAA,EAAA,KAAA;AACA,OALA;AAMA,WAAA,oBAAA,GAAA,IAAA;AACA,KAZA;AAaA,IAAA,SAbA,qBAaA,GAbA,EAaA;AACA,UAAA,MAAA,GAAA,EAAA;;AACA,UAAA,QAAA,GAAA,MAAA,QAAA,IAAA,GAAA,CAAA,GAAA,IAAA,GAAA,CAAA,IAAA,EAAA;AACA,YAAA,KAAA,aAAA,GAAA,CAAA,GAAA,eAAA,GAAA,CAAA,IAAA,SAAA;AACA,QAAA,MAAA,GAAA,KAAA;AACA,OAHA,MAGA;AACA,QAAA,MAAA,GAAA,GAAA;AACA;;AACA,aAAA,MAAA;AACA;AAtBA,GAjBA;AAyCA,EAAA,QAAA;AACA,IAAA,YADA,0BACA;AACA,UAAA,OAAA;;AACA,UAAA,KAAA,oBAAA,CAAA,eAAA,KAAA,QAAA,EAAA;AACA,YAAA,IAAA,GAAA,KAAA,oBAAA,CAAA,IAAA;AACA,QAAA,OAAA,GAAA,CACA;AACA,UAAA,IAAA,EAAA,KAAA,EAAA,CAAA,iCAAA,CADA;AAEA,UAAA,KAAA,EAAA,MAFA;AAGA,UAAA,QAAA,EAAA;AAHA,SADA,CAAA;AAQA,YAAA,IAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA,CAAA;;AAEA,iCAAA,IAAA,2BAAA;AAAA,cAAA,GAAA,YAAA;AACA,UAAA,OAAA,CAAA,IAAA,CAAA;AACA,YAAA,IAAA,EAAA,cAAA,CAAA,wBAAA,CAAA,GAAA,CADA;AAEA,YAAA,KAAA,EAAA,GAFA;AAGA,YAAA,QAAA,EAAA;AAHA,WAAA;AAKA;AACA,OAnBA,MAmBA;AACA,QAAA,OAAA,GAAA,CACA;AACA,UAAA,IAAA,EAAA,KAAA,EAAA,CAAA,sCAAA,CADA;AAEA,UAAA,KAAA,EAAA,WAFA;AAGA,UAAA,QAAA,EAAA,KAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SADA,EAOA;AACA,UAAA,IAAA,EAAA,KAAA,EAAA,CAAA,sCAAA,CADA;AAEA,UAAA,KAAA,EAAA,WAFA;AAGA,UAAA,QAAA,EAAA,KAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAPA,EAaA;AACA,UAAA,IAAA,EAAA,KAAA,EAAA,CAAA,uCAAA,CADA;AAEA,UAAA,KAAA,EAAA,YAFA;AAGA,UAAA,QAAA,EAAA,KAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAbA,EAmBA;AACA,UAAA,IAAA,EAAA,KAAA,EAAA,CAAA,8CAAA,CADA;AAEA,UAAA,KAAA,EAAA,iBAFA;AAGA,UAAA,QAAA,EAAA,KAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAnBA,EAyBA;AACA,UAAA,IAAA,EAAA,KAAA,EAAA,CAAA,mCAAA,CADA;AAEA,UAAA,KAAA,EAAA,QAFA;AAGA,UAAA,QAAA,EAAA,KAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAzBA,CAAA;AAgCA;;AACA,aAAA,OAAA;AACA,KAzDA;AA0DA,IAAA,UA1DA,wBA0DA;AAAA;;AACA,UAAA,EAAA,GAAA,IAAA;AACA,UAAA,KAAA,GAAA,EAAA;;AACA,UAAA,EAAA,CAAA,oBAAA,CAAA,eAAA,KAAA,QAAA,EAAA;AACA,YAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,IAAA;AACA,YAAA,YAAA,GAAA,EAAA,CAAA,YAAA;AACA,YAAA,IAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA,CAAA;;AACA,YAAA,IAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,cAAA,OAAA,GAAA,IAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAAA,YAAA,CAAA;AACA,cAAA,YAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAAA,YAAA,CAAA,CAAA,CAFA,CAGA;;AACA,cAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,gBAAA,iBAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAAA,YAAA,CAAA,CAAA;;AACA,gBAAA,KAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,EAAA;AACA,cAAA,YAAA,sBACA,IAAA,GAAA,8BAAA,YAAA,sBAAA,iBAAA,GADA,CAAA;AAGA;AACA;;AACA,cAAA,OAAA,EAAA;AACA;AACA,YAAA,YAAA,CAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,kBAAA,iBAAA,GAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA;;AACA,kBAAA,OAAA,KAAA,YAAA,EAAA;AACA,gBAAA,iBAAA,GAAA,IAAA;AACA;;AACA,kBAAA,iBAAA,EAAA;AACA,oBAAA,GAAA,GAAA;AACA,kBAAA,IAAA,EAAA,OAAA,GAAA,KAAA,CAAA,EAAA,gBAAA,OAAA,EAAA,GAAA;AADA,iBAAA,CADA,CAIA;;AACA,oBAAA,YAAA,GAAA,KAAA,CAAA,SAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;AAEA,gBAAA,GAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,GAAA,YAAA,IAAA,GAAA,CAPA,CAQA;;AACA,oBAAA,IAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA;AACA,sBAAA,WAAA,GAAA,KAAA,CAAA,SAAA,CACA,IAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAAA,YAAA,EAAA,OAAA,CADA,CAAA;;AAGA,kBAAA,GAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,GAAA,WAAA,IAAA,GAAA;AACA;;AACA,gBAAA,KAAA,CAAA,IAAA,CAAA,GAAA;AACA;AACA,aAtBA;AAuBA;AACA;AACA,OA3CA,MA2CA;AACA,YAAA,EAAA,CAAA,oBAAA,CAAA,uBAAA,EAAA;AACA,UAAA,KAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,uBAAA;AACA;AACA,OAlDA,CAoDA;;;AACA,UAAA,KAAA,oBAAA,CAAA,eAAA,KAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA,EAAA,CAAA,EAAA;AACA,cAAA,OAAA,GAAA,CAAA,CAAA,MAAA,CAAA,IAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA;AACA,cAAA,OAAA,GAAA,CAAA,CAAA,MAAA,CAAA,IAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA;;AACA,cAAA,OAAA,KAAA,OAAA,EAAA;AACA,mBAAA,CAAA,CAAA,MAAA,CAAA,CAAA,aAAA,CAAA,CAAA,CAAA,MAAA,CAAA,CAAA;AACA;;AACA,iBAAA,OAAA,GAAA,OAAA;AACA,SAPA;AAQA;;AAEA,aAAA,KAAA;AACA;AA3HA,KA6HA,UAAA,CAAA,YAAA,EAAA;AACA,IAAA,oBAAA,EAAA,sBADA;AAEA,IAAA,cAAA,EAAA;AAFA,GAAA,CA7HA,MAiIA,UAAA,CAAA,UAAA,EAAA;AACA,IAAA,QAAA,EAAA,UADA;AAEA,IAAA,YAAA,EAAA;AAFA,GAAA,CAjIA,MAqIA,UAAA,CAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA;AADA,GAAA,CArIA,MAwIA,SAAA,CAAA,YAAA,EAAA;AACA,IAAA,oBAAA,EAAA;AADA,GAAA,CAxIA,CAzCA;AAqLA,EAAA,KAAA,EAAA;AACA,IAAA,oBADA,gCACA,KADA,EACA;AACA,WAAA,cAAA,GAAA,EAAA;AACA,UAAA,CAAA,KAAA,EAAA;AACA,UAAA,IAAA,GAAA,KAAA,CAAA,IAAA;;AACA,UAAA,IAAA,EAAA;AACA,aAAA,IAAA,GAAA,IAAA,IAAA,EAAA;AACA,cAAA,GAAA,GAAA,IAAA,CAAA,GAAA,CAAA;;AACA,eAAA,IAAA,IAAA,IAAA,GAAA,EAAA;AACA,iBAAA,cAAA,CAAA,IAAA,CAAA;AACA,cAAA,OAAA,YAAA,IAAA,CAAA,KAAA,CAAA,IAAA,GAAA,EAAA,CAAA,SADA;AAEA,cAAA,KAAA,YAAA,IAAA;AAFA,aAAA;AAIA;;AACA;AACA;;AACA,aAAA,YAAA,GACA,KAAA,cAAA,CAAA,MAAA,GAAA,CAAA,GACA,KAAA,cAAA,CAAA,KAAA,cAAA,CAAA,MAAA,GAAA,CAAA,EAAA,KADA,GAEA,EAHA;AAIA;AACA;AArBA,GArLA;AA4MA,EAAA,OA5MA,qBA4MA;AACA,QAAA,OAAA,GAAA,QAAA,CAAA,cAAA,CAAA,kBAAA,CAAA;AACA,SAAA,cAAA,CAAA,eAAA,GAAA,KAAA;AACA,SAAA,cAAA,CAAA,eAAA,GAAA,OAAA;AACA,SAAA,cAAA,CAAA,MAAA,GAAA,KAAA,KAAA,CAAA,KAAA,QAAA,CAAA;AACA;AAjNA,CAAA","sourcesContent":["<template>\n  <v-card\n    v-if=\"selectedThematicData\"\n    v-draggable=\"draggableValue\"\n    class=\"thematic-data elevation-4\"\n    id=\"isochroneWindowId\"\n    :style=\"[isExpanded ? { height: '400px' } : { height: '50px' }]\"\n    style=\"position:fixed;top:10px;left:400px;z-index:2;max-width:440px;min-width:370px;height:450px;overflow:hidden;\"\n  >\n    <v-layout justify-space-between column fill-height>\n      <v-app-bar\n        :ref=\"handleId\"\n        :color=\"appColor.primary\"\n        height=\"50\"\n        class=\"elevation-0\"\n        style=\"cursor:grab;\"\n        dark\n      >\n        <v-app-bar-nav-icon\n          ><v-icon>fas fa-bullseye</v-icon></v-app-bar-nav-icon\n        >\n        <v-toolbar-title>Isochrone</v-toolbar-title>\n        <v-spacer></v-spacer>\n        <v-icon @click=\"expand\" class=\"toolbar-icons mr-2\">\n          {{ isExpanded ? \"fas fa-chevron-up\" : \"fas fa-chevron-down\" }}</v-icon\n        >\n        <v-icon @click=\"close\" class=\"toolbar-icons ml-2\">fas fa-times</v-icon>\n      </v-app-bar>\n\n      <vue-scroll>\n        <v-flex v-if=\"isExpanded\" xs12 class=\"mx-3 mt-1\">\n          <v-card-text class=\"ma-0 py-0 pt-0 pb-2\">\n            <v-layout row wrap justify-end>\n              <v-alert\n                v-if=\"\n                  selectedPois.length === 0 &&\n                    selectedThematicData.calculationType === 'single'\n                \"\n                border=\"left\"\n                colored-border\n                class=\"mb-1 mt-2 elevation-2\"\n                icon=\"info\"\n                :color=\"appColor.primary\"\n                dense\n              >\n                <span\n                  v-html=\"$t('isochrones.tableData.selectAmenitiesMsg')\"\n                ></span>\n              </v-alert>\n              <v-flex shrink>\n                <v-chip class=\"mt-1 mb-0\">\n                  {{\n                    `${$t(\"isochrones.calculation\")} - ${\n                      selectedThematicData.calculationId\n                    }`\n                  }}\n                </v-chip></v-flex\n              ></v-layout\n            >\n          </v-card-text>\n          <v-select\n            v-if=\"selectedThematicData.calculationType === 'single'\"\n            :items=\"isochroneSteps\"\n            item-text=\"display\"\n            item-value=\"value\"\n            :label=\"$t('isochrones.tableData.timeFilter')\"\n            v-model=\"selectedTime\"\n          ></v-select>\n\n          <v-data-table\n            :headers=\"tableHeaders\"\n            :items=\"tableItems\"\n            class=\"elevation-1 mb-2\"\n            :search=\"search\"\n            hide-default-footer\n            :no-data-text=\"\n              selectedTime === null\n                ? $t('isochrones.tableData.selectTimeMsg')\n                : $t('isochrones.tableData.noDataMsg')\n            \"\n            :items-per-page=\"-1\"\n          >\n            <template v-slot:items=\"props\">\n              <td v-for=\"(header, index) in tableHeaders\" :key=\"index\">\n                {{ props.item[header.value] }}\n              </td>\n            </template>\n          </v-data-table>\n        </v-flex>\n      </vue-scroll>\n    </v-layout>\n  </v-card>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport IsochroneUtils from \"../../utils/IsochroneUtils\";\nimport { Draggable } from \"draggable-vue-directive\";\nimport { mapFields } from \"vuex-map-fields\";\n\nexport default {\n  directives: {\n    Draggable\n  },\n  data: () => ({\n    isochroneSteps: [],\n    selectedTime: null,\n    search: \"\",\n    isExpanded: true,\n    //Vue windows\\ draggable\n    handleId: \"handle-id\",\n    draggableValue: {\n      handle: undefined,\n      boundingElement: undefined,\n      resetInitialPos: undefined\n    }\n  }),\n  methods: {\n    expand() {\n      this.isExpanded = !this.isExpanded;\n    },\n    close() {\n      this.isochroneLayer\n        .getSource()\n        .getFeatures()\n        .forEach(f => {\n          f.set(\"highlightFeature\", false);\n        });\n      this.selectedThematicData = null;\n    },\n    getString(val) {\n      let string = \"\";\n      if (typeof val === \"object\" && val.cnt && val.area) {\n        const value = `${val.cnt} (${val.area} m2)`;\n        string = value;\n      } else {\n        string = val;\n      }\n      return string;\n    }\n  },\n  computed: {\n    tableHeaders() {\n      let headers;\n      if (this.selectedThematicData.calculationType === \"single\") {\n        let pois = this.selectedThematicData.pois;\n        headers = [\n          {\n            text: this.$t(\"isochrones.tableData.table.pois\"),\n            value: \"pois\",\n            sortable: false\n          }\n        ];\n\n        const keys = Object.keys(pois);\n\n        for (const key of keys) {\n          headers.push({\n            text: IsochroneUtils.getIsochroneAliasFromKey(key),\n            value: key,\n            sortable: false\n          });\n        }\n      } else {\n        headers = [\n          {\n            text: this.$t(\"isochrones.tableData.table.isochrone\"),\n            value: \"isochrone\",\n            sortable: false,\n            width: \"25%\"\n          },\n          {\n            text: this.$t(\"isochrones.tableData.table.studyArea\"),\n            value: \"studyArea\",\n            sortable: false,\n            width: \"15%\"\n          },\n          {\n            text: this.$t(\"isochrones.tableData.table.population\"),\n            value: \"population\",\n            sortable: false,\n            width: \"20%\"\n          },\n          {\n            text: this.$t(\"isochrones.tableData.table.reachedPopulation\"),\n            value: \"reachPopulation\",\n            sortable: false,\n            width: \"20%\"\n          },\n          {\n            text: this.$t(\"isochrones.tableData.table.shared\"),\n            value: \"shared\",\n            sortable: false,\n            width: \"20%\"\n          }\n        ];\n      }\n      return headers;\n    },\n    tableItems() {\n      let me = this;\n      let items = [];\n      if (me.selectedThematicData.calculationType === \"single\") {\n        let pois = me.selectedThematicData.pois;\n        let selectedTime = me.selectedTime;\n        let keys = Object.keys(pois);\n        if (keys.length > 0) {\n          let sumPois = pois[keys[0]][selectedTime];\n          let amenityNames = Object.keys(pois[keys[0]][selectedTime]);\n          // Only if double-calculation\n          if (keys.length === 2) {\n            const inputAmenityNames = Object.keys(pois[keys[1]][selectedTime]);\n            if (Array.isArray(inputAmenityNames)) {\n              amenityNames = [\n                ...new Set([...amenityNames, ...inputAmenityNames])\n              ];\n            }\n          }\n          if (sumPois) {\n            //Loop through  amenities\n            amenityNames.forEach(amenity => {\n              let isAmenitySelected = this.poisAois[amenity];\n              if (amenity === \"population\") {\n                isAmenitySelected = true;\n              }\n              if (isAmenitySelected) {\n                let obj = {\n                  pois: amenity ? this.$t(`pois.${amenity}`) : amenity\n                };\n                //Default or input calculation\n                let valueDefault = this.getString(sumPois[amenity]);\n\n                obj[keys[0]] = valueDefault || \"-\";\n                //Double calculation\n                if (pois[keys[1]]) {\n                  let valueDouble = this.getString(\n                    pois[keys[1]][selectedTime][amenity]\n                  );\n                  obj[keys[1]] = valueDouble || \"-\";\n                }\n                items.push(obj);\n              }\n            });\n          }\n        }\n      } else {\n        if (me.selectedThematicData.multiIsochroneTableData) {\n          items = me.selectedThematicData.multiIsochroneTableData;\n        }\n      }\n\n      //Sort table rows based on number of amenties || alphabeticaly (only on single calculations)\n      if (this.selectedThematicData.calculationType === \"single\") {\n        items.sort((a, b) => {\n          const b_Value = b[Object.keys(b)[0]];\n          const a_Value = a[Object.keys(a)[0]];\n          if (b_Value === a_Value) {\n            return a[\"pois\"].localeCompare(b[\"pois\"]);\n          }\n          return b_Value - a_Value;\n        });\n      }\n\n      return items;\n    },\n\n    ...mapGetters(\"isochrones\", {\n      selectedThematicData: \"selectedThematicData\",\n      isochroneLayer: \"isochroneLayer\"\n    }),\n    ...mapGetters(\"poisaois\", {\n      poisAois: \"poisAois\",\n      selectedPois: \"selectedPois\"\n    }),\n    ...mapGetters(\"app\", {\n      appColor: \"appColor\"\n    }),\n    ...mapFields(\"isochrones\", {\n      selectedThematicData: \"selectedThematicData\"\n    })\n  },\n  watch: {\n    selectedThematicData(value) {\n      this.isochroneSteps = [];\n      if (!value) return;\n      let pois = value.pois;\n      if (pois) {\n        for (const key in pois) {\n          let obj = pois[key];\n          for (const prop in obj) {\n            this.isochroneSteps.push({\n              display: `${Math.round(prop / 60)} min`,\n              value: `${prop}`\n            });\n          }\n          break;\n        }\n        this.selectedTime =\n          this.isochroneSteps.length > 0\n            ? this.isochroneSteps[this.isochroneSteps.length - 1].value\n            : [];\n      }\n    }\n  },\n  mounted() {\n    const element = document.getElementById(\"ol-map-container\");\n    this.draggableValue.resetInitialPos = false;\n    this.draggableValue.boundingElement = element;\n    this.draggableValue.handle = this.$refs[this.handleId];\n  }\n};\n</script>\n<style scoped>\n.toolbar-icons:hover {\n  cursor: pointer;\n}\n.thematic-data {\n  transition: height 0.1s linear;\n}\n</style>\n"],"sourceRoot":"src/components/isochrones"}]}