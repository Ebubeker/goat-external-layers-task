{"remainingRequest":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/eslint-loader/index.js??ref--13-0!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/store/modules/map.js","dependencies":[{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/store/modules/map.js","mtime":1657636289863},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js","mtime":1657636581841},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js","mtime":1657636581481},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/eslint-loader/index.js","mtime":1657636581253}],"contextDependencies":[],"result":["import _defineProperty from \"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\n\nvar _actions, _mutations;\n\nimport ApiService from \"../../services/api.service\";\nimport { getField, updateField } from \"vuex-map-fields\";\nimport { GET_STUDY_AREA, GET_STUDY_AREAS_LIST } from \"../actions.type\";\nimport { SET_STUDY_AREA, SET_STUDY_AREAS_LIST } from \"../mutations.type\";\nimport { SET_ERROR } from \"../mutations.type\";\nimport { errorMessage } from \"../../utils/Helpers\";\nimport { transformExtent } from \"ol/proj\";\nimport { geojsonToFeature } from \"../../utils/MapUtils\";\nvar state = {\n  studyArea: null,\n  studyAreaList: [],\n  subStudyAreaLayer: null,\n  map: null,\n  errors: null,\n  helpTooltip: {\n    isActive: false,\n    currentMessage: \"\"\n  },\n  messages: {\n    snackbar: {\n      type: \"info\",\n      message: \"\",\n      state: false,\n      timeout: 2000\n    }\n  },\n  contextmenu: null,\n  isMapBusy: false,\n  ///\n  layers: {},\n  // Only for operational layers\n  osmMode: false,\n  reqFields: null,\n  bldEntranceLayer: null,\n  editLayer: null,\n  selectedEditLayer: null,\n  heatmapCancelToken: null,\n  isMapillaryBtnDisabled: false,\n  miniViewerVisible: false,\n  vectorTileStyles: {},\n  vectorTileStylesCopy: {},\n  print: {\n    active: false,\n    title: \"\",\n    crs: [{\n      display: \"Web Mercator\",\n      value: \"EPSG:3857\"\n    }],\n    selectedCrs: \"EPSG:3857\",\n    outputFormats: [{\n      display: \"PDF\",\n      value: \"pdf\"\n    }, {\n      display: \"PNG\",\n      value: \"png\"\n    }],\n    selectedFormat: \"pdf\",\n    rotation: 0,\n    dpi: 150,\n    dpis: [300, 150, 75],\n    layout: {\n      name: \"A4 landscape\",\n      format: \"a4\",\n      orientation: \"landscape\",\n      size: [297, 210],\n      padding: 5 // in mm.\n\n    },\n    layouts: [{\n      name: \"A4 portrait\",\n      format: \"a4\",\n      orientation: \"portrait\",\n      size: [210, 297],\n      padding: 5 // in mm.\n\n    }, {\n      name: \"A4 landscape\",\n      format: \"a4\",\n      orientation: \"landscape\",\n      size: [297, 210],\n      padding: 5 // in mm.\n\n    }, {\n      name: \"A3 portrait\",\n      format: \"a3\",\n      orientation: \"portrait\",\n      size: [297, 410],\n      padding: 10 // in mm.\n\n    }, {\n      name: \"A3 landscape\",\n      format: \"a3\",\n      orientation: \"landscape\",\n      size: [410, 297],\n      padding: 10 // in mm.\n\n    }],\n    legend: true,\n    grid: false,\n    scale: null,\n    scales: [500000, 100000, 50000, 25000, 10000, 5000, 2500, 500, 250, 100]\n  }\n};\nvar getters = {\n  studyArea: function studyArea(state) {\n    return state.studyArea;\n  },\n  subStudyAreaLayer: function subStudyAreaLayer(state) {\n    return state.subStudyAreaLayer;\n  },\n  studyAreaProps: function studyAreaProps(state) {\n    if (Array.isArray(state.studyArea)) {\n      var studyArea = state.studyArea[0];\n      return {\n        id: studyArea.get(\"id\"),\n        name: studyArea.get(\"name\"),\n        population: studyArea.get(\"population\")\n      };\n    } else {\n      return {};\n    }\n  },\n  studyAreaList: function studyAreaList(state) {\n    return state.studyAreaList;\n  },\n  map: function map(state) {\n    return state.map;\n  },\n  layers: function layers(state) {\n    return state.layers;\n  },\n  // eslint-disable-next-line no-unused-vars\n  layerConfigList: function layerConfigList(state, getters, rootState, rootGetters) {\n    var layerGroups = rootState.app.appConfig.layer_groups;\n    var layers = [];\n    layerGroups.forEach(function (layerGroup) {\n      var groupName = Object.keys(layerGroup)[0];\n      layerGroup[groupName].children.forEach(function (layerObj) {\n        var layerName = Object.keys(layerObj)[0];\n        var layer = layerObj[layerName];\n        layers.push(layer);\n      });\n    });\n    return layers;\n  },\n  osmMode: function osmMode(state) {\n    return state.osmMode;\n  },\n  helpTooltip: function helpTooltip(state) {\n    return state.helpTooltip;\n  },\n  messages: function messages(state) {\n    return state.messages;\n  },\n  contextmenu: function contextmenu(state) {\n    return state.contextmenu;\n  },\n  snackbar: function snackbar(state) {\n    return state.messages.snackbar;\n  },\n  reqFields: function reqFields(state) {\n    return state.reqFields;\n  },\n  bldEntranceLayer: function bldEntranceLayer(state) {\n    return state.bldEntranceLayer;\n  },\n  editLayer: function editLayer(state) {\n    return state.editLayer;\n  },\n  selectedEditLayer: function selectedEditLayer(state) {\n    return state.selectedEditLayer;\n  },\n  isMapillaryBtnDisabled: function isMapillaryBtnDisabled(state) {\n    return state.isMapillaryBtnDisabled;\n  },\n  miniViewerVisible: function miniViewerVisible(state) {\n    return state.miniViewerVisible;\n  },\n  print: function print(state) {\n    return state.print;\n  },\n  isMapBusy: function isMapBusy(state) {\n    return state.isMapBusy;\n  },\n  heatmapCancelToken: function heatmapCancelToken(state) {\n    return state.heatmapCancelToken;\n  },\n  getField: getField\n};\nvar actions = (_actions = {}, _defineProperty(_actions, GET_STUDY_AREA, function (context, credentials) {\n  return new Promise(function (resolve, reject) {\n    ApiService.get(\"/users/me/study-area\", credentials).then(function (response) {\n      context.commit(SET_STUDY_AREA, response.data);\n      resolve(response.data);\n    }).catch(function (_ref) {\n      var response = _ref.response;\n      errorMessage(context, response, SET_ERROR);\n      reject(response);\n    });\n  });\n}), _defineProperty(_actions, GET_STUDY_AREAS_LIST, function (context, credentials) {\n  return new Promise(function (resolve, reject) {\n    ApiService.get(\"/users/me/study-areas-list\", credentials).then(function (response) {\n      context.commit(SET_STUDY_AREAS_LIST, response.data);\n      resolve(response.data);\n    }).catch(function (_ref2) {\n      var response = _ref2.response;\n      errorMessage(context, response, SET_ERROR);\n      reject(response);\n    });\n  });\n}), _actions);\nvar mutations = (_mutations = {\n  SET_MAP: function SET_MAP(state, map) {\n    state.map = map;\n  }\n}, _defineProperty(_mutations, SET_ERROR, function (state, error) {\n  state.errors = error;\n}), _defineProperty(_mutations, \"START_HELP_TOOLTIP\", function START_HELP_TOOLTIP(state, message) {\n  state.helpTooltip.isActive = true;\n  state.helpTooltip.currentMessage = message;\n}), _defineProperty(_mutations, \"STOP_HELP_TOOLTIP\", function STOP_HELP_TOOLTIP(state) {\n  state.helpTooltip.isActive = false;\n}), _defineProperty(_mutations, \"UPDATE_HELP_TOOLTIP\", function UPDATE_HELP_TOOLTIP(state, message) {\n  state.currentMessage = message;\n}), _defineProperty(_mutations, \"TOGGLE_SNACKBAR\", function TOGGLE_SNACKBAR(state, payload) {\n  Object.assign(state.messages.snackbar, payload);\n}), _defineProperty(_mutations, SET_STUDY_AREA, function (state, studyArea) {\n  var olFeatures = geojsonToFeature(studyArea, {\n    dataProjection: \"EPSG:4326\",\n    featureProjection: \"EPSG:3857\"\n  });\n  var extent = transformExtent(olFeatures[0].get(\"bounds\"), \"EPSG:4326\", \"EPSG:3857\");\n\n  if (Array.isArray(olFeatures) && olFeatures.length > 0) {\n    olFeatures[0].set(\"bounds\", extent);\n    state.studyArea = olFeatures;\n  }\n}), _defineProperty(_mutations, SET_STUDY_AREAS_LIST, function (state, studyAreas) {\n  state.studyAreaList = studyAreas;\n}), _defineProperty(_mutations, \"SET_CONTEXTMENU\", function SET_CONTEXTMENU(state, contextmenu) {\n  state.contextmenu = contextmenu;\n}), _defineProperty(_mutations, \"SET_CLONE_VECTOR_STYLES\", function SET_CLONE_VECTOR_STYLES(state, customerData) {\n  var layerGroups = customerData.layer_groups;\n  var styles = {};\n  layerGroups.forEach(function (layerGroup) {\n    var groupName = Object.keys(layerGroup)[0];\n    layerGroup[groupName].children.forEach(function (layerObj) {\n      var layerName = Object.keys(layerObj)[0];\n      var layer = layerObj[layerName];\n      styles[layerName] = {\n        format: \"geostyler\",\n        style: layer.style,\n        translation: layer.translation || {}\n      };\n    });\n  });\n  state.vectorTileStyles = styles; //Making deep copy of styleobject for restoring the the original style of layers\n\n  state.vectorTileStylesCopy = JSON.parse(JSON.stringify(styles));\n}), _defineProperty(_mutations, \"UPDATE_REQ_FIELDS\", function UPDATE_REQ_FIELDS(state, reqFields) {\n  state.reqFields = reqFields;\n}), _defineProperty(_mutations, \"SET_BLD_ENTRANCE_LAYER\", function SET_BLD_ENTRANCE_LAYER(state, entranceLayer) {\n  state.bldEntranceLayer = entranceLayer;\n}), _defineProperty(_mutations, \"SET_EDIT_LAYER\", function SET_EDIT_LAYER(state, editLayer) {\n  state.editLayer = editLayer;\n}), _defineProperty(_mutations, \"updateField\", updateField), _mutations);\nexport default {\n  namespaced: true,\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n};",{"version":3,"sources":["/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/store/modules/map.js"],"names":["ApiService","getField","updateField","GET_STUDY_AREA","GET_STUDY_AREAS_LIST","SET_STUDY_AREA","SET_STUDY_AREAS_LIST","SET_ERROR","errorMessage","transformExtent","geojsonToFeature","state","studyArea","studyAreaList","subStudyAreaLayer","map","errors","helpTooltip","isActive","currentMessage","messages","snackbar","type","message","timeout","contextmenu","isMapBusy","layers","osmMode","reqFields","bldEntranceLayer","editLayer","selectedEditLayer","heatmapCancelToken","isMapillaryBtnDisabled","miniViewerVisible","vectorTileStyles","vectorTileStylesCopy","print","active","title","crs","display","value","selectedCrs","outputFormats","selectedFormat","rotation","dpi","dpis","layout","name","format","orientation","size","padding","layouts","legend","grid","scale","scales","getters","studyAreaProps","Array","isArray","id","get","population","layerConfigList","rootState","rootGetters","layerGroups","app","appConfig","layer_groups","forEach","layerGroup","groupName","Object","keys","children","layerObj","layerName","layer","push","actions","context","credentials","Promise","resolve","reject","then","response","commit","data","catch","mutations","SET_MAP","error","payload","assign","olFeatures","dataProjection","featureProjection","extent","length","set","studyAreas","customerData","styles","style","translation","JSON","parse","stringify","entranceLayer","namespaced"],"mappings":"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","sourcesContent":["import ApiService from \"../../services/api.service\";\nimport { getField, updateField } from \"vuex-map-fields\";\nimport { GET_STUDY_AREA, GET_STUDY_AREAS_LIST } from \"../actions.type\";\nimport { SET_STUDY_AREA, SET_STUDY_AREAS_LIST } from \"../mutations.type\";\nimport { SET_ERROR } from \"../mutations.type\";\nimport { errorMessage } from \"../../utils/Helpers\";\nimport { transformExtent } from \"ol/proj\";\nimport { geojsonToFeature } from \"../../utils/MapUtils\";\n\nconst state = {\n  studyArea: null,\n  studyAreaList: [],\n  subStudyAreaLayer: null,\n  map: null,\n  errors: null,\n  helpTooltip: {\n    isActive: false,\n    currentMessage: \"\"\n  },\n  messages: {\n    snackbar: {\n      type: \"info\",\n      message: \"\",\n      state: false,\n      timeout: 2000\n    }\n  },\n  contextmenu: null,\n  isMapBusy: false,\n  ///\n\n  layers: {}, // Only for operational layers\n  osmMode: false,\n  reqFields: null,\n  bldEntranceLayer: null,\n  editLayer: null,\n  selectedEditLayer: null,\n  heatmapCancelToken: null,\n  isMapillaryBtnDisabled: false,\n  miniViewerVisible: false,\n  vectorTileStyles: {},\n  vectorTileStylesCopy: {},\n  print: {\n    active: false,\n    title: \"\",\n    crs: [{ display: \"Web Mercator\", value: \"EPSG:3857\" }],\n    selectedCrs: \"EPSG:3857\",\n    outputFormats: [\n      { display: \"PDF\", value: \"pdf\" },\n      { display: \"PNG\", value: \"png\" }\n    ],\n    selectedFormat: \"pdf\",\n    rotation: 0,\n    dpi: 150,\n    dpis: [300, 150, 75],\n    layout: {\n      name: \"A4 landscape\",\n      format: \"a4\",\n      orientation: \"landscape\",\n      size: [297, 210],\n      padding: 5 // in mm.\n    },\n    layouts: [\n      {\n        name: \"A4 portrait\",\n        format: \"a4\",\n        orientation: \"portrait\",\n        size: [210, 297],\n        padding: 5 // in mm.\n      },\n      {\n        name: \"A4 landscape\",\n        format: \"a4\",\n        orientation: \"landscape\",\n        size: [297, 210],\n        padding: 5 // in mm.\n      },\n      {\n        name: \"A3 portrait\",\n        format: \"a3\",\n        orientation: \"portrait\",\n        size: [297, 410],\n        padding: 10 // in mm.\n      },\n      {\n        name: \"A3 landscape\",\n        format: \"a3\",\n        orientation: \"landscape\",\n        size: [410, 297],\n        padding: 10 // in mm.\n      }\n    ],\n    legend: true,\n    grid: false,\n    scale: null,\n    scales: [500000, 100000, 50000, 25000, 10000, 5000, 2500, 500, 250, 100]\n  }\n};\n\nconst getters = {\n  studyArea: state => state.studyArea,\n  subStudyAreaLayer: state => state.subStudyAreaLayer,\n  studyAreaProps: state => {\n    if (Array.isArray(state.studyArea)) {\n      const studyArea = state.studyArea[0];\n      return {\n        id: studyArea.get(\"id\"),\n        name: studyArea.get(\"name\"),\n        population: studyArea.get(\"population\")\n      };\n    } else {\n      return {};\n    }\n  },\n  studyAreaList: state => state.studyAreaList,\n  map: state => state.map,\n  layers: state => state.layers,\n  // eslint-disable-next-line no-unused-vars\n  layerConfigList: (state, getters, rootState, rootGetters) => {\n    const layerGroups = rootState.app.appConfig.layer_groups;\n    const layers = [];\n    layerGroups.forEach(layerGroup => {\n      const groupName = Object.keys(layerGroup)[0];\n      layerGroup[groupName].children.forEach(layerObj => {\n        const layerName = Object.keys(layerObj)[0];\n        const layer = layerObj[layerName];\n        layers.push(layer);\n      });\n    });\n    return layers;\n  },\n  osmMode: state => state.osmMode,\n  helpTooltip: state => state.helpTooltip,\n  messages: state => state.messages,\n  contextmenu: state => state.contextmenu,\n  snackbar: state => state.messages.snackbar,\n  reqFields: state => state.reqFields,\n  bldEntranceLayer: state => state.bldEntranceLayer,\n  editLayer: state => state.editLayer,\n  selectedEditLayer: state => state.selectedEditLayer,\n  isMapillaryBtnDisabled: state => state.isMapillaryBtnDisabled,\n  miniViewerVisible: state => state.miniViewerVisible,\n  print: state => state.print,\n  isMapBusy: state => state.isMapBusy,\n  heatmapCancelToken: state => state.heatmapCancelToken,\n  getField\n};\n\nconst actions = {\n  [GET_STUDY_AREA](context, credentials) {\n    return new Promise((resolve, reject) => {\n      ApiService.get(\"/users/me/study-area\", credentials)\n        .then(response => {\n          context.commit(SET_STUDY_AREA, response.data);\n          resolve(response.data);\n        })\n        .catch(({ response }) => {\n          errorMessage(context, response, SET_ERROR);\n          reject(response);\n        });\n    });\n  },\n  [GET_STUDY_AREAS_LIST](context, credentials) {\n    return new Promise((resolve, reject) => {\n      ApiService.get(\"/users/me/study-areas-list\", credentials)\n        .then(response => {\n          context.commit(SET_STUDY_AREAS_LIST, response.data);\n          resolve(response.data);\n        })\n        .catch(({ response }) => {\n          errorMessage(context, response, SET_ERROR);\n          reject(response);\n        });\n    });\n  }\n};\n\nconst mutations = {\n  SET_MAP(state, map) {\n    state.map = map;\n  },\n  [SET_ERROR](state, error) {\n    state.errors = error;\n  },\n  START_HELP_TOOLTIP(state, message) {\n    state.helpTooltip.isActive = true;\n    state.helpTooltip.currentMessage = message;\n  },\n  STOP_HELP_TOOLTIP(state) {\n    state.helpTooltip.isActive = false;\n  },\n  UPDATE_HELP_TOOLTIP(state, message) {\n    state.currentMessage = message;\n  },\n  TOGGLE_SNACKBAR(state, payload) {\n    Object.assign(state.messages.snackbar, payload);\n  },\n  [SET_STUDY_AREA](state, studyArea) {\n    const olFeatures = geojsonToFeature(studyArea, {\n      dataProjection: \"EPSG:4326\",\n      featureProjection: \"EPSG:3857\"\n    });\n    const extent = transformExtent(\n      olFeatures[0].get(\"bounds\"),\n      \"EPSG:4326\",\n      \"EPSG:3857\"\n    );\n    if (Array.isArray(olFeatures) && olFeatures.length > 0) {\n      olFeatures[0].set(\"bounds\", extent);\n      state.studyArea = olFeatures;\n    }\n  },\n  [SET_STUDY_AREAS_LIST](state, studyAreas) {\n    state.studyAreaList = studyAreas;\n  },\n  SET_CONTEXTMENU(state, contextmenu) {\n    state.contextmenu = contextmenu;\n  },\n  SET_CLONE_VECTOR_STYLES(state, customerData) {\n    const layerGroups = customerData.layer_groups;\n    const styles = {};\n    layerGroups.forEach(layerGroup => {\n      const groupName = Object.keys(layerGroup)[0];\n      layerGroup[groupName].children.forEach(layerObj => {\n        const layerName = Object.keys(layerObj)[0];\n        const layer = layerObj[layerName];\n        styles[layerName] = {\n          format: \"geostyler\",\n          style: layer.style,\n          translation: layer.translation || {}\n        };\n      });\n    });\n    state.vectorTileStyles = styles;\n    //Making deep copy of styleobject for restoring the the original style of layers\n    state.vectorTileStylesCopy = JSON.parse(JSON.stringify(styles));\n  },\n  /////////\n  UPDATE_REQ_FIELDS(state, reqFields) {\n    state.reqFields = reqFields;\n  },\n  SET_BLD_ENTRANCE_LAYER(state, entranceLayer) {\n    state.bldEntranceLayer = entranceLayer;\n  },\n  SET_EDIT_LAYER(state, editLayer) {\n    state.editLayer = editLayer;\n  },\n  updateField\n};\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations\n};\n"]}]}