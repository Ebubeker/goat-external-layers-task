{"remainingRequest":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vuetify-loader/lib/loader.js??ref--19-0!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/components/core/UserSettings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/components/core/UserSettings.vue","mtime":1657636289855},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js","mtime":1657636581841},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js","mtime":1657636581481},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vuetify-loader/lib/loader.js","mtime":1657636582513},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js","mtime":1657636581841},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vue-loader/lib/index.js","mtime":1657636582549}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from \"vuex\";\nimport { LOGOUT } from \"../../store/actions.type\";\nimport i18n from \"@/plugins/i18n\";\nimport { EventBus } from \"../../EventBus\";\nimport ApiService from \"../../services/api.service\";\nimport { mapFields } from \"vuex-map-fields\";\nexport default {\n  data: function data() {\n    return {\n      languages: [{\n        flag: \"gb\",\n        language: \"en\",\n        title: \"English\"\n      }, {\n        flag: \"de\",\n        language: \"de\",\n        title: \"Deutsch\"\n      }],\n      interactionType: \"languageChange\",\n      studyAreaId: null,\n      userCopy: {}\n    };\n  },\n  computed: _objectSpread({}, mapGetters(\"auth\", {\n    user: \"currentUser\"\n  }), {}, mapGetters(\"app\", {\n    appColor: \"appColor\",\n    occupiedStoragePercentage: \"occupiedStoragePercentage\",\n    uploadedStorageSize: \"uploadedStorageSize\"\n  }), {}, mapGetters(\"map\", {\n    studyAreaList: \"studyAreaList\"\n  }), {}, mapGetters(\"scenarios\", {\n    scenarios: \"scenarios\",\n    limitScenarios: \"limitScenarios\"\n  }), {}, mapGetters(\"isochrones\", {\n    calculations: \"calculations\"\n  }), {}, mapFields(\"auth\", {\n    userState: \"user\"\n  })),\n  methods: {\n    changeLocale: function changeLocale(locale) {\n      i18n.locale = locale; //Close other interactions.\n\n      EventBus.$emit(\"ol-interaction-activated\", this.interactionType);\n\n      if (this.contextmenu) {\n        this.contextmenu.close();\n      }\n\n      EventBus.$emit(\"ol-interaction-stoped\", this.interactionType); // Save language change\n\n      ApiService.put(\"/users/me/preference\", {\n        language_preference: locale\n      });\n    },\n    openContactSupportInNewTab: function openContactSupportInNewTab() {\n      var url = \"https://plan4better.de/kontakt/\";\n\n      if (url) {\n        window.open(url, \"_blank\");\n      }\n    },\n    changeStudyArea: function changeStudyArea(newStudyArea) {\n      var _this = this;\n\n      if (newStudyArea === this.user.active_study_area_id) {\n        return;\n      }\n\n      if (this.calculations.length > 0) {\n        this.$refs.confirm.open(this.$t(\"userSettings.changeStudyAreaTitle\"), this.$t(\"userSettings.changeStudyAreaMessageWarning\"), {\n          color: this.appColor.primary,\n          icon: \"fa-solid fa-retweet\"\n        }).then(function (confirm) {\n          if (confirm) {\n            ApiService.put(\"/users/me/preference\", {\n              active_study_area_id: newStudyArea\n            }).then(function () {\n              window.location.reload();\n            });\n          } else {\n            _this.studyAreaId = _this.user.active_study_area_id;\n          }\n        });\n      } else {\n        ApiService.put(\"/users/me/preference\", {\n          active_study_area_id: newStudyArea\n        }).then(function () {\n          window.location.reload();\n        });\n      }\n    },\n    logout: function logout() {\n      this.$store.dispatch(\"auth/\".concat(LOGOUT));\n      window.location.reload();\n    }\n  },\n  created: function created() {\n    this.studyAreaId = this.user.active_study_area_id;\n    this.userCopy = JSON.parse(JSON.stringify(this.user)); // Workaround for logout clean\n  }\n};",{"version":3,"sources":["UserSettings.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-flex xs12 sm8 md4>\n    <v-card class=\"px-16 mx-4 py-0 mb-2 fill-height\" flat>\n      <v-subheader> </v-subheader>\n\n      <v-row no-gutters class=\"mb-4\">\n        <v-col justify=\"center\" align=\"center\" cols=\"4\">\n          <v-row no-gutters justify=\"center\" align=\"center\" class=\"fill-height\">\n            <v-avatar size=\"60\">\n              <v-icon large class=\"fa-solid fa-user\"></v-icon>\n            </v-avatar>\n          </v-row>\n        </v-col>\n\n        <v-col cols=\"8\">\n          <v-row no-gutters align=\"center\" class=\"fill-height\">\n            <p class=\"mb-0 header-name\">\n              {{\n                `${user.name || userCopy.name}, ${user.surname ||\n                  userCopy.surname}`\n              }}\n            </p>\n            <p class=\"mb-0 sub-header\">\n              {{ `${user.email || userCopy.email}` }}\n            </p>\n          </v-row>\n        </v-col>\n      </v-row>\n\n      <v-divider></v-divider>\n      <v-select\n        class=\"mt-8\"\n        v-model=\"studyAreaId\"\n        :items=\"studyAreaList\"\n        item-value=\"id\"\n        item-text=\"name\"\n        :label=\"$t('userSettings.changeStudyAreaTitle')\"\n        @change=\"changeStudyArea\"\n      >\n      </v-select>\n      <v-divider></v-divider>\n      <v-select\n        class=\"mt-2\"\n        :value=\"$i18n.locale\"\n        :items=\"languages\"\n        item-value=\"language\"\n        item-text=\"title\"\n        :label=\"$t('userSettings.uiLanguage')\"\n        @change=\"changeLocale\"\n      >\n      </v-select>\n      <v-btn\n        style=\"text-transform:none;justify-content:left;\"\n        width=\"100%\"\n        class=\"mt-0\"\n        text\n        @click=\"openContactSupportInNewTab\"\n      >\n        <v-icon class=\"light-icon-color\" left>\n          fas fa-comments-question\n        </v-icon>\n        <span class=\"ml-2  theme--light\">\n          {{ $t(\"userSettings.contactSupport\") }}\n        </span>\n      </v-btn>\n      <br />\n      <v-btn\n        @click=\"logout\"\n        style=\"text-transform:none;justify-content:left;\"\n        width=\"100%\"\n        class=\"mt-3 mb-3\"\n        text\n      >\n        <v-icon class=\"light-icon-color\" left>\n          fas fa-arrow-right-from-bracket\n        </v-icon>\n        <span class=\"ml-2  theme--light\">\n          {{ $t(\"userSettings.logout\") }}\n        </span>\n      </v-btn>\n      <v-divider></v-divider>\n      <p class=\"mt-5 mb-1 sub-header\">\n        {{ (uploadedStorageSize / 1024).toFixed(2)\n        }}{{ $t(\"userSettings.mbOf\") }}\n        {{\n          parseInt(\n            user.storage ? user.storage / 1024 : userCopy.storage / 1024\n          )\n        }}{{ $t(\"userSettings.mbUsed\") }}\n      </p>\n      <v-progress-linear\n        height=\"2\"\n        :color=\"appColor.secondary\"\n        :value=\"occupiedStoragePercentage\"\n        class=\"mb-6 mt-0 pt-0\"\n      ></v-progress-linear>\n      <p class=\"mt-2 sub-header\">\n        {{ $t(\"userSettings.scenarios\") }}: {{ scenarios.length }} /\n        {{ limitScenarios }}\n      </p>\n    </v-card>\n    <v-spacer></v-spacer>\n    <confirm ref=\"confirm\"></confirm>\n  </v-flex>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport { LOGOUT } from \"../../store/actions.type\";\nimport i18n from \"@/plugins/i18n\";\nimport { EventBus } from \"../../EventBus\";\nimport ApiService from \"../../services/api.service\";\nimport { mapFields } from \"vuex-map-fields\";\n\nexport default {\n  data: () => ({\n    languages: [\n      { flag: \"gb\", language: \"en\", title: \"English\" },\n      { flag: \"de\", language: \"de\", title: \"Deutsch\" }\n    ],\n    interactionType: \"languageChange\",\n    studyAreaId: null,\n    userCopy: {}\n  }),\n  computed: {\n    ...mapGetters(\"auth\", { user: \"currentUser\" }),\n    ...mapGetters(\"app\", {\n      appColor: \"appColor\",\n      occupiedStoragePercentage: \"occupiedStoragePercentage\",\n      uploadedStorageSize: \"uploadedStorageSize\"\n    }),\n    ...mapGetters(\"map\", {\n      studyAreaList: \"studyAreaList\"\n    }),\n    ...mapGetters(\"scenarios\", {\n      scenarios: \"scenarios\",\n      limitScenarios: \"limitScenarios\"\n    }),\n    ...mapGetters(\"isochrones\", {\n      calculations: \"calculations\"\n    }),\n    ...mapFields(\"auth\", {\n      userState: \"user\"\n    })\n  },\n  methods: {\n    changeLocale(locale) {\n      i18n.locale = locale;\n      //Close other interactions.\n      EventBus.$emit(\"ol-interaction-activated\", this.interactionType);\n      if (this.contextmenu) {\n        this.contextmenu.close();\n      }\n      EventBus.$emit(\"ol-interaction-stoped\", this.interactionType);\n      // Save language change\n      ApiService.put(\"/users/me/preference\", {\n        language_preference: locale\n      });\n    },\n    openContactSupportInNewTab() {\n      let url = \"https://plan4better.de/kontakt/\";\n      if (url) {\n        window.open(url, \"_blank\");\n      }\n    },\n    changeStudyArea(newStudyArea) {\n      if (newStudyArea === this.user.active_study_area_id) {\n        return;\n      }\n      if (this.calculations.length > 0) {\n        this.$refs.confirm\n          .open(\n            this.$t(\"userSettings.changeStudyAreaTitle\"),\n            this.$t(\"userSettings.changeStudyAreaMessageWarning\"),\n            { color: this.appColor.primary, icon: \"fa-solid fa-retweet\" }\n          )\n          .then(confirm => {\n            if (confirm) {\n              ApiService.put(\"/users/me/preference\", {\n                active_study_area_id: newStudyArea\n              }).then(() => {\n                window.location.reload();\n              });\n            } else {\n              this.studyAreaId = this.user.active_study_area_id;\n            }\n          });\n      } else {\n        ApiService.put(\"/users/me/preference\", {\n          active_study_area_id: newStudyArea\n        }).then(() => {\n          window.location.reload();\n        });\n      }\n    },\n    logout() {\n      this.$store.dispatch(`auth/${LOGOUT}`);\n      window.location.reload();\n    }\n  },\n  created() {\n    this.studyAreaId = this.user.active_study_area_id;\n    this.userCopy = JSON.parse(JSON.stringify(this.user)); // Workaround for logout clean\n  }\n};\n</script>\n\n<style scoped></style>\n"],"sourceRoot":"src/components/core"}]}