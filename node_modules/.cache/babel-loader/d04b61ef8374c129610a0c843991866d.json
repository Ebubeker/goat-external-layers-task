{"remainingRequest":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/eslint-loader/index.js??ref--13-0!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/router/index.js","dependencies":[{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/router/index.js","mtime":1657636289859},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js","mtime":1657636581841},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js","mtime":1657636581481},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/eslint-loader/index.js","mtime":1657636581253}],"contextDependencies":[],"result":["import Vue from \"vue\";\nimport Router from \"vue-router\";\nimport { validateToken } from \"../utils/Helpers\";\nVue.use(Router); //Create routes\n\nvar router = new Router({\n  mode: \"history\",\n  routes: [{\n    path: \"/\",\n    name: \"main\",\n    component: function component() {\n      return import(\"../views/Main.vue\");\n    },\n    meta: {\n      requiresAuth: true,\n      scope: \"user\"\n    }\n  }, {\n    path: \"/login\",\n    name: \"login\",\n    component: function component() {\n      return import(\"../views/Auth.vue\");\n    },\n    meta: {\n      requiresAuth: false\n    }\n  }, {\n    path: \"/forgot-password\",\n    name: \"forgot-password\",\n    component: function component() {\n      return import(\"../views/Auth.vue\");\n    },\n    meta: {\n      requiresAuth: false\n    }\n  }, {\n    path: \"/reset-password\",\n    name: \"reset-password\",\n    component: function component() {\n      return import(\"../views/Auth.vue\");\n    },\n    meta: {\n      requiresAuth: false\n    }\n  }, {\n    path: \"/register\",\n    name: \"register-demo\",\n    component: function component() {\n      return import(\"../views/Auth.vue\");\n    },\n    meta: {\n      requiresAuth: false\n    }\n  }, {\n    path: \"/activate-account\",\n    name: \"activate-account\",\n    component: function component() {\n      return import(\"../views/Auth.vue\");\n    },\n    meta: {\n      requiresAuth: false\n    }\n  }]\n}); // Ensure we checked auth before each page load.\n\nrouter.beforeEach(function (to, from, next) {\n  var requiresAuth = to.matched.some(function (x) {\n    return x.meta.requiresAuth;\n  });\n\n  if (!requiresAuth) {\n    return next();\n  } // Get roles and check if user is allowed\n\n\n  var token = localStorage.getItem(\"id_token\");\n  var decodedToken = validateToken(token);\n\n  if (!decodedToken) {\n    return next({\n      path: \"/login\"\n    });\n  }\n\n  return next();\n});\nexport default router;",{"version":3,"sources":["/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/router/index.js"],"names":["Vue","Router","validateToken","use","router","mode","routes","path","name","component","meta","requiresAuth","scope","beforeEach","to","from","next","matched","some","x","token","localStorage","getItem","decodedToken"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,SAASC,aAAT;AACAF,GAAG,CAACG,GAAJ,CAAQF,MAAR,E,CAEA;;AACA,IAAIG,MAAM,GAAG,IAAIH,MAAJ,CAAW;AACtBI,EAAAA,IAAI,EAAE,SADgB;AAEtBC,EAAAA,MAAM,EAAE,CACN;AACEC,IAAAA,IAAI,EAAE,GADR;AAEEC,IAAAA,IAAI,EAAE,MAFR;AAGEC,IAAAA,SAAS,EAAE;AAAA,aAAM,2BAAN;AAAA,KAHb;AAIEC,IAAAA,IAAI,EAAE;AACJC,MAAAA,YAAY,EAAE,IADV;AAEJC,MAAAA,KAAK,EAAE;AAFH;AAJR,GADM,EAUN;AACEL,IAAAA,IAAI,EAAE,QADR;AAEEC,IAAAA,IAAI,EAAE,OAFR;AAGEC,IAAAA,SAAS,EAAE;AAAA,aAAM,2BAAN;AAAA,KAHb;AAIEC,IAAAA,IAAI,EAAE;AACJC,MAAAA,YAAY,EAAE;AADV;AAJR,GAVM,EAkBN;AACEJ,IAAAA,IAAI,EAAE,kBADR;AAEEC,IAAAA,IAAI,EAAE,iBAFR;AAGEC,IAAAA,SAAS,EAAE;AAAA,aAAM,2BAAN;AAAA,KAHb;AAIEC,IAAAA,IAAI,EAAE;AACJC,MAAAA,YAAY,EAAE;AADV;AAJR,GAlBM,EA0BN;AACEJ,IAAAA,IAAI,EAAE,iBADR;AAEEC,IAAAA,IAAI,EAAE,gBAFR;AAGEC,IAAAA,SAAS,EAAE;AAAA,aAAM,2BAAN;AAAA,KAHb;AAIEC,IAAAA,IAAI,EAAE;AACJC,MAAAA,YAAY,EAAE;AADV;AAJR,GA1BM,EAkCN;AACEJ,IAAAA,IAAI,EAAE,WADR;AAEEC,IAAAA,IAAI,EAAE,eAFR;AAGEC,IAAAA,SAAS,EAAE;AAAA,aAAM,2BAAN;AAAA,KAHb;AAIEC,IAAAA,IAAI,EAAE;AACJC,MAAAA,YAAY,EAAE;AADV;AAJR,GAlCM,EA0CN;AACEJ,IAAAA,IAAI,EAAE,mBADR;AAEEC,IAAAA,IAAI,EAAE,kBAFR;AAGEC,IAAAA,SAAS,EAAE;AAAA,aAAM,2BAAN;AAAA,KAHb;AAIEC,IAAAA,IAAI,EAAE;AACJC,MAAAA,YAAY,EAAE;AADV;AAJR,GA1CM;AAFc,CAAX,CAAb,C,CAuDA;;AACAP,MAAM,CAACS,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC,MAAML,YAAY,GAAGG,EAAE,CAACG,OAAH,CAAWC,IAAX,CAAgB,UAAAC,CAAC;AAAA,WAAIA,CAAC,CAACT,IAAF,CAAOC,YAAX;AAAA,GAAjB,CAArB;;AACA,MAAI,CAACA,YAAL,EAAmB;AACjB,WAAOK,IAAI,EAAX;AACD,GAJmC,CAKpC;;;AACA,MAAMI,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAd;AACA,MAAMC,YAAY,GAAGrB,aAAa,CAACkB,KAAD,CAAlC;;AACA,MAAI,CAACG,YAAL,EAAmB;AACjB,WAAOP,IAAI,CAAC;AAAET,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAX;AACD;;AACD,SAAOS,IAAI,EAAX;AACD,CAZD;AAcA,eAAeZ,MAAf","sourcesContent":["import Vue from \"vue\";\nimport Router from \"vue-router\";\nimport { validateToken } from \"../utils/Helpers\";\nVue.use(Router);\n\n//Create routes\nlet router = new Router({\n  mode: \"history\",\n  routes: [\n    {\n      path: \"/\",\n      name: \"main\",\n      component: () => import(\"../views/Main.vue\"),\n      meta: {\n        requiresAuth: true,\n        scope: \"user\"\n      }\n    },\n    {\n      path: \"/login\",\n      name: \"login\",\n      component: () => import(\"../views/Auth.vue\"),\n      meta: {\n        requiresAuth: false\n      }\n    },\n    {\n      path: \"/forgot-password\",\n      name: \"forgot-password\",\n      component: () => import(\"../views/Auth.vue\"),\n      meta: {\n        requiresAuth: false\n      }\n    },\n    {\n      path: \"/reset-password\",\n      name: \"reset-password\",\n      component: () => import(\"../views/Auth.vue\"),\n      meta: {\n        requiresAuth: false\n      }\n    },\n    {\n      path: \"/register\",\n      name: \"register-demo\",\n      component: () => import(\"../views/Auth.vue\"),\n      meta: {\n        requiresAuth: false\n      }\n    },\n    {\n      path: \"/activate-account\",\n      name: \"activate-account\",\n      component: () => import(\"../views/Auth.vue\"),\n      meta: {\n        requiresAuth: false\n      }\n    }\n  ]\n});\n\n// Ensure we checked auth before each page load.\nrouter.beforeEach((to, from, next) => {\n  const requiresAuth = to.matched.some(x => x.meta.requiresAuth);\n  if (!requiresAuth) {\n    return next();\n  }\n  // Get roles and check if user is allowed\n  const token = localStorage.getItem(\"id_token\");\n  const decodedToken = validateToken(token);\n  if (!decodedToken) {\n    return next({ path: \"/login\" });\n  }\n  return next();\n});\n\nexport default router;\n"]}]}