{"remainingRequest":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vuetify-loader/lib/loader.js??ref--19-0!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/components/other/IconPicker.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/src/components/other/IconPicker.vue","mtime":1657636289855},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js","mtime":1657636581841},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/babel-loader/lib/index.js","mtime":1657636581481},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vuetify-loader/lib/loader.js","mtime":1657636582513},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/cache-loader/dist/cjs.js","mtime":1657636581841},{"path":"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/vue-loader/lib/index.js","mtime":1657636582549}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport _toConsumableArray from \"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/home/ebubeker/Desktop/programming/work tasks/goat/app/client/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mask } from \"vue-the-mask\";\nimport ApiService from \"../../services/api.service\";\nimport { mapFields } from \"vuex-map-fields\";\nimport { mapMutations, mapGetters } from \"vuex\";\nimport { solidFontAwesomeProDefs, fontAwesome6Categories } from \"../../utils/FontAwesomev6ProOnlySolid\";\nimport { SET_POI_ICONS } from \"../../store/mutations.type\";\nimport { debounce } from \"../../utils/Helpers\";\nexport default {\n  directives: {\n    mask: mask\n  },\n  props: {\n    visible: {\n      type: Boolean,\n      required: true\n    },\n    selectedIcon: {\n      type: Object\n    },\n    color: {\n      type: String,\n      default: \"#2BB381\"\n    }\n  },\n  data: function data() {\n    return {\n      isBusy: false,\n      isRestoring: false,\n      // Pagination\n      page: 1,\n      pageSize: 100,\n      listCount: 0,\n      historyList: [],\n      //--\n      newIcon: {},\n      iconColor: \"\",\n      mask: \"!#XXXXXXXX\",\n      iconColorMenu: false,\n      filters: {\n        name: \"\",\n        category: \"all\"\n      },\n      filteredIcons: [],\n      iconCategories: [\"all\", \"custom(p4b)\"],\n      allIcons: []\n    };\n  },\n  computed: _objectSpread({\n    show: {\n      get: function get() {\n        return this.visible;\n      },\n      set: function set(value) {\n        if (!value) {\n          this.$emit(\"close\");\n        }\n      }\n    },\n    swatchStyle: function swatchStyle() {\n      var iconColor = this.iconColor,\n          iconColorMenu = this.iconColorMenu;\n      return {\n        backgroundColor: iconColor,\n        cursor: \"pointer\",\n        height: \"30px\",\n        width: \"30px\",\n        borderRadius: iconColorMenu ? \"50%\" : \"4px\",\n        transition: \"border-radius 200ms ease-in-out\"\n      };\n    },\n    pages: function pages() {\n      var _this = this;\n\n      if (_this.pageSize == null || _this.listCount == null) return 0;\n      return Math.ceil(_this.listCount / _this.pageSize);\n    }\n  }, mapFields(\"app\", {\n    appConfig: \"appConfig\"\n  }), {}, mapGetters(\"poisaois\", {\n    poisAoisLayer: \"poisAoisLayer\"\n  })),\n  methods: _objectSpread({}, mapMutations(\"app\", {\n    setPoiIcons: SET_POI_ICONS\n  }), {\n    updateIcon: function updateIcon() {\n      var _this2 = this;\n\n      var iconCategory = this.selectedIcon.value;\n      var payload = {};\n      payload[iconCategory] = {\n        icon: this.newIcon.icon ? this.newIcon.icon : this.selectedIcon.icon,\n        color: [this.iconColor]\n      };\n      this.isBusy = true;\n      ApiService.post(\"customizations/user/insert/poi\", payload).then(function (res) {\n        if (res.data) {\n          _this2.appConfig = res.data;\n\n          _this2.setPoiIcons(res.data);\n\n          _this2.poisAoisLayer.changed();\n        }\n      }).finally(function () {\n        _this2.isBusy = false;\n        _this2.show = false;\n      });\n    },\n    changeIconColor: debounce(function (color) {\n      this.iconColor = color;\n    }, 60),\n    restoreDefault: function restoreDefault() {\n      var _this3 = this;\n\n      this.isRestoring = true;\n      ApiService.delete(\"customizations/user/reset-style/poi/\".concat(this.selectedIcon.value)).then(function (res) {\n        if (res.data) {\n          _this3.appConfig = res.data;\n\n          _this3.setPoiIcons(res.data);\n\n          _this3.poisAoisLayer.changed();\n        }\n      }).finally(function () {\n        _this3.isRestoring = false;\n        _this3.show = false;\n      });\n    },\n    selectIcon: function selectIcon(icon) {\n      this.newIcon = {\n        icon: icon.icon,\n        color: this.iconColor\n      };\n    },\n    selectColor: function selectColor(color) {\n      this.newIcon = {\n        icon: this.newIcon.icon ? this.newIcon.icon : this.selectedIcon.icon,\n        color: color\n      };\n      this.iconColor = color;\n    },\n    filterIcons: function filterIcons() {\n      var _this4 = this;\n\n      var filterKeys = Object.keys(this.filters);\n\n      if (!this.filters.name && this.filters.category == \"all\") {\n        this.filteredIcons = this.allIcons;\n      }\n\n      filterKeys.forEach(function (key) {\n        if (_this4.filters[key] === null) {\n          _this4.filters[key] = \"\";\n        }\n      });\n      this.filteredIcons = this.allIcons.filter(function (icon) {\n        return icon.name.toLowerCase().includes(_this4.filters.name.toLowerCase());\n      });\n\n      if (this.filters.category != \"all\") {\n        this.filteredIcons = this.filteredIcons.filter(function (icon) {\n          return icon.category === _this4.filters.category;\n        });\n      }\n\n      this.page = 1;\n      this.initPage();\n      this.updatePage(this.page);\n    },\n    initPage: function initPage() {\n      var _this = this;\n\n      _this.listCount = _this.filteredIcons.length;\n\n      if (_this.listCount < _this.pageSize) {\n        _this.historyList = _this.filteredIcons;\n      } else {\n        _this.historyList = _this.filteredIcons.slice(0, _this.pageSize);\n      }\n    },\n    updatePage: function updatePage(pageIndex) {\n      var _this = this;\n\n      var _start = (pageIndex - 1) * _this.pageSize;\n\n      var _end = pageIndex * _this.pageSize;\n\n      _this.historyList = _this.filteredIcons.slice(_start, _end);\n      _this.page = pageIndex;\n    },\n    clear: function clear() {\n      this.filters.name = \"\";\n      this.filters.category = \"all\";\n      this.newIcon = {};\n      this.iconColor = \"\";\n      this.iconColorMenu = false;\n      this.page = 1;\n      this.pageSize = 100;\n      this.listCount = 0;\n      this.historyList = [];\n    },\n    cancel: function cancel() {\n      this.clear();\n      this.show = false;\n    }\n  }),\n  watch: {\n    visible: function visible() {\n      if (this.visible === true) {\n        this.clear();\n        this.iconColor = this.selectedIcon.color[0] || this.color;\n        this.filterIcons();\n      }\n    }\n  },\n  created: function created() {\n    var _this5 = this;\n\n    if (window.FontAwesomeKitConfig && window.FontAwesomeKitConfig.iconUploads) {\n      var iconDefs = Object.keys(window.FontAwesomeKitConfig.iconUploads);\n      iconDefs.forEach(function (iconDef) {\n        _this5.allIcons.push({\n          icon: \"fak fa-\".concat(iconDef),\n          category: \"custom(p4b)\",\n          name: \"\"\n        });\n      });\n      var solidIcons = Object.keys(solidFontAwesomeProDefs);\n      solidIcons.forEach(function (iconDef) {\n        _this5.allIcons.push({\n          icon: iconDef,\n          category: solidFontAwesomeProDefs[iconDef].category_id,\n          name: solidFontAwesomeProDefs[iconDef].label ? solidFontAwesomeProDefs[iconDef].label : \"\"\n        });\n      });\n      this.iconCategories = [].concat(_toConsumableArray(this.iconCategories), _toConsumableArray(fontAwesome6Categories));\n    }\n  }\n};",{"version":3,"sources":["IconPicker.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-dialog\n    v-model=\"show\"\n    v-if=\"selectedIcon\"\n    persistent\n    scrollable\n    max-width=\"830px\"\n  >\n    <v-card v-if=\"visible\">\n      <v-app-bar :color=\"color\" dark>\n        <v-app-bar-nav-icon\n          ><v-icon>fa-solid fa-icons</v-icon></v-app-bar-nav-icon\n        >\n        <v-toolbar-title>Change Icon</v-toolbar-title>\n        <v-spacer></v-spacer>\n        <v-app-bar-nav-icon @click.stop=\"show = false\"\n          ><v-icon>close</v-icon></v-app-bar-nav-icon\n        >\n      </v-app-bar>\n      <v-row no-gutters class=\"mt-5 ml-2 mx-0 px-0\">\n        <v-col cols=\"12\" sm=\"4\"></v-col>\n        <v-col cols=\"12\" sm=\"4\" align=\"center\">\n          <v-row no-gutters align=\"center\" justify=\"center\">\n            <i\n              :class=\"\n                `${\n                  newIcon.icon ? newIcon.icon : selectedIcon.icon\n                } fa-2x notranslate mx-2 theme--light grey--text`\n              \"\n              :style=\"\n                Array.isArray(selectedIcon.color) &&\n                selectedIcon.color.length > 1\n                  ? `--fa-primary-color: ${selectedIcon.color[0]};--fa-secondary-color: ${selectedIcon.color[1]};width:40px;`\n                  : `color: ${\n                      iconColor ? iconColor : selectedIcon.color\n                    } !important;width:40px;`\n              \"\n            >\n            </i>\n            <h3 class=\"mt-1\">\n              {{\n                $te(`pois.${selectedIcon.value}`)\n                  ? $t(`pois.${selectedIcon.value}`)\n                  : selectedIcon.value\n              }}\n            </h3>\n          </v-row>\n        </v-col>\n        <v-col cols=\"12\" sm=\"4\" align=\"end\" class=\"pr-4\">\n          <v-tooltip top>\n            <template v-slot:activator=\"{ on }\">\n              <v-btn\n                v-on=\"on\"\n                @click=\"restoreDefault()\"\n                color=\"white\"\n                class=\"mr-2 mb-2 \"\n                fab\n                small\n                :loading=\"isRestoring\"\n                depressed\n              >\n                <i\n                  :class=\"\n                    `fas fa-undo fa-2x notranslate mx-2 theme--light grey--text`\n                  \"\n                ></i>\n              </v-btn>\n            </template>\n            Restore Default\n          </v-tooltip>\n        </v-col>\n      </v-row>\n      <v-divider class=\"my-2 mt-4 mx-4\"></v-divider>\n      <v-row justify=\"center\" class=\"mt-1 mx-0 px-0\">\n        <v-text-field\n          style=\"max-width:150px;\"\n          v-model=\"iconColor\"\n          v-mask=\"mask\"\n          hide-details\n          class=\"mx-5 mb-2 pa-0\"\n          solo\n        >\n          <template v-slot:append>\n            <v-menu\n              v-model=\"iconColorMenu\"\n              top\n              nudge-bottom=\"105\"\n              nudge-left=\"16\"\n              :close-on-content-click=\"false\"\n            >\n              <template v-slot:activator=\"{ on }\">\n                <div :style=\"swatchStyle\" v-on=\"on\" />\n              </template>\n              <v-card>\n                <v-card-text class=\"pa-0\">\n                  <v-color-picker\n                    @input=\"changeIconColor\"\n                    :value=\"iconColor\"\n                    flat\n                  />\n                </v-card-text>\n              </v-card>\n            </v-menu>\n          </template>\n        </v-text-field>\n      </v-row>\n      <v-divider class=\"mx-4 mt-1\"></v-divider>\n      <v-row class=\"mx-4 px-0\">\n        <v-col cols=\"4\">\n          <v-select\n            :items=\"iconCategories\"\n            v-model=\"filters.category\"\n            label=\"Categories\"\n            @change=\"filterIcons\"\n          >\n            <template slot=\"selection\" slot-scope=\"{ item }\">\n              {{\n                $te(`fa6Categories.${item}`)\n                  ? $t(`fa6Categories.${item}`)\n                  : item\n              }}\n            </template>\n            <template slot=\"item\" slot-scope=\"{ item }\">\n              {{\n                $te(`fa6Categories.${item}`)\n                  ? $t(`fa6Categories.${item}`)\n                  : item\n              }}\n            </template>\n          </v-select>\n        </v-col>\n        <v-col cols=\"8\">\n          <v-text-field\n            class=\"mt-4 mx-6\"\n            v-model=\"filters.name\"\n            placeholder=\"Search icon\"\n            prepend-icon=\"search\"\n            type=\"text\"\n            onautocomplete=\"off\"\n            @input=\"filterIcons\"\n            dense\n            clearable\n          />\n        </v-col>\n      </v-row>\n      <vue-scroll>\n        <v-container class=\"pb-0\">\n          <vue-scroll>\n            <v-col cols=\"12\">\n              <span :key=\"i\" v-for=\"(icon, i) in historyList\">\n                <v-tooltip :disabled=\"!icon.name\" top>\n                  <template v-slot:activator=\"{ on }\">\n                    <v-btn\n                      v-on=\"on\"\n                      @click=\"selectIcon(icon)\"\n                      color=\"white\"\n                      class=\"mr-2 mb-2 \"\n                      fab\n                      small\n                      depressed\n                    >\n                      <i\n                        :class=\"\n                          `${icon.icon} fa-2x notranslate mx-2 theme--light grey--text`\n                        \"\n                      ></i>\n                    </v-btn>\n                  </template>\n                  {{ icon.name }}\n                </v-tooltip>\n              </span>\n            </v-col>\n          </vue-scroll>\n        </v-container>\n      </vue-scroll>\n      <v-card-actions class=\"pt-0 elevation-3\">\n        <v-pagination\n          v-if=\"filteredIcons.length > 100\"\n          circle\n          :total-visible=\"7\"\n          :color=\"color\"\n          class=\"pagination pl-10 ml-10 mt-1\"\n          v-model=\"page\"\n          :length=\"pages\"\n          @input=\"updatePage\"\n        ></v-pagination>\n        <v-spacer></v-spacer>\n        <v-btn color=\"grey\" text @click.native=\"cancel\">{{\n          $t(\"buttonLabels.cancel\")\n        }}</v-btn>\n        <v-btn\n          color=\"primary darken-1\"\n          :loading=\"isBusy\"\n          text\n          @click.native=\"updateIcon\"\n          >{{ $t(\"buttonLabels.save\") }}</v-btn\n        >\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script>\nimport { mask } from \"vue-the-mask\";\nimport ApiService from \"../../services/api.service\";\nimport { mapFields } from \"vuex-map-fields\";\nimport { mapMutations, mapGetters } from \"vuex\";\nimport {\n  solidFontAwesomeProDefs,\n  fontAwesome6Categories\n} from \"../../utils/FontAwesomev6ProOnlySolid\";\nimport { SET_POI_ICONS } from \"../../store/mutations.type\";\nimport { debounce } from \"../../utils/Helpers\";\nexport default {\n  directives: { mask },\n  props: {\n    visible: { type: Boolean, required: true },\n    selectedIcon: { type: Object },\n    color: { type: String, default: \"#2BB381\" }\n  },\n  data: () => ({\n    isBusy: false,\n    isRestoring: false,\n    // Pagination\n    page: 1,\n    pageSize: 100,\n    listCount: 0,\n    historyList: [],\n    //--\n    newIcon: {},\n    iconColor: \"\",\n    mask: \"!#XXXXXXXX\",\n    iconColorMenu: false,\n    filters: { name: \"\", category: \"all\" },\n    filteredIcons: [],\n    iconCategories: [\"all\", \"custom(p4b)\"],\n    allIcons: []\n  }),\n  computed: {\n    show: {\n      get() {\n        return this.visible;\n      },\n      set(value) {\n        if (!value) {\n          this.$emit(\"close\");\n        }\n      }\n    },\n\n    swatchStyle() {\n      const { iconColor, iconColorMenu } = this;\n      return {\n        backgroundColor: iconColor,\n        cursor: \"pointer\",\n        height: \"30px\",\n        width: \"30px\",\n        borderRadius: iconColorMenu ? \"50%\" : \"4px\",\n        transition: \"border-radius 200ms ease-in-out\"\n      };\n    },\n    pages() {\n      let _this = this;\n      if (_this.pageSize == null || _this.listCount == null) return 0;\n      return Math.ceil(_this.listCount / _this.pageSize);\n    },\n    ...mapFields(\"app\", {\n      appConfig: \"appConfig\"\n    }),\n    ...mapGetters(\"poisaois\", {\n      poisAoisLayer: \"poisAoisLayer\"\n    })\n  },\n  methods: {\n    ...mapMutations(\"app\", {\n      setPoiIcons: SET_POI_ICONS\n    }),\n    updateIcon() {\n      const iconCategory = this.selectedIcon.value;\n      const payload = {};\n      payload[iconCategory] = {\n        icon: this.newIcon.icon ? this.newIcon.icon : this.selectedIcon.icon,\n        color: [this.iconColor]\n      };\n      this.isBusy = true;\n      ApiService.post(`customizations/user/insert/poi`, payload)\n        .then(res => {\n          if (res.data) {\n            this.appConfig = res.data;\n            this.setPoiIcons(res.data);\n            this.poisAoisLayer.changed();\n          }\n        })\n        .finally(() => {\n          this.isBusy = false;\n          this.show = false;\n        });\n    },\n    changeIconColor: debounce(function(color) {\n      this.iconColor = color;\n    }, 60),\n    restoreDefault() {\n      this.isRestoring = true;\n      ApiService.delete(\n        `customizations/user/reset-style/poi/${this.selectedIcon.value}`\n      )\n        .then(res => {\n          if (res.data) {\n            this.appConfig = res.data;\n            this.setPoiIcons(res.data);\n            this.poisAoisLayer.changed();\n          }\n        })\n        .finally(() => {\n          this.isRestoring = false;\n          this.show = false;\n        });\n    },\n    selectIcon(icon) {\n      this.newIcon = {\n        icon: icon.icon,\n        color: this.iconColor\n      };\n    },\n    selectColor(color) {\n      this.newIcon = {\n        icon: this.newIcon.icon ? this.newIcon.icon : this.selectedIcon.icon,\n        color: color\n      };\n      this.iconColor = color;\n    },\n    filterIcons() {\n      const filterKeys = Object.keys(this.filters);\n      if (!this.filters.name && this.filters.category == \"all\") {\n        this.filteredIcons = this.allIcons;\n      }\n      filterKeys.forEach(key => {\n        if (this.filters[key] === null) {\n          this.filters[key] = \"\";\n        }\n      });\n      this.filteredIcons = this.allIcons.filter(icon =>\n        icon.name.toLowerCase().includes(this.filters.name.toLowerCase())\n      );\n      if (this.filters.category != \"all\") {\n        this.filteredIcons = this.filteredIcons.filter(\n          icon => icon.category === this.filters.category\n        );\n      }\n      this.page = 1;\n      this.initPage();\n      this.updatePage(this.page);\n    },\n    initPage: function() {\n      let _this = this;\n      _this.listCount = _this.filteredIcons.length;\n      if (_this.listCount < _this.pageSize) {\n        _this.historyList = _this.filteredIcons;\n      } else {\n        _this.historyList = _this.filteredIcons.slice(0, _this.pageSize);\n      }\n    },\n    updatePage: function(pageIndex) {\n      let _this = this;\n      let _start = (pageIndex - 1) * _this.pageSize;\n      let _end = pageIndex * _this.pageSize;\n      _this.historyList = _this.filteredIcons.slice(_start, _end);\n      _this.page = pageIndex;\n    },\n    clear() {\n      this.filters.name = \"\";\n      this.filters.category = \"all\";\n      this.newIcon = {};\n      this.iconColor = \"\";\n      this.iconColorMenu = false;\n      this.page = 1;\n      this.pageSize = 100;\n      this.listCount = 0;\n      this.historyList = [];\n    },\n    cancel() {\n      this.clear();\n      this.show = false;\n    }\n  },\n  watch: {\n    visible() {\n      if (this.visible === true) {\n        this.clear();\n        this.iconColor = this.selectedIcon.color[0] || this.color;\n        this.filterIcons();\n      }\n    }\n  },\n  created() {\n    if (\n      window.FontAwesomeKitConfig &&\n      window.FontAwesomeKitConfig.iconUploads\n    ) {\n      const iconDefs = Object.keys(window.FontAwesomeKitConfig.iconUploads);\n      iconDefs.forEach(iconDef => {\n        this.allIcons.push({\n          icon: `fak fa-${iconDef}`,\n          category: \"custom(p4b)\",\n          name: \"\"\n        });\n      });\n\n      const solidIcons = Object.keys(solidFontAwesomeProDefs);\n      solidIcons.forEach(iconDef => {\n        this.allIcons.push({\n          icon: iconDef,\n          category: solidFontAwesomeProDefs[iconDef].category_id,\n          name: solidFontAwesomeProDefs[iconDef].label\n            ? solidFontAwesomeProDefs[iconDef].label\n            : \"\"\n        });\n      });\n\n      this.iconCategories = [...this.iconCategories, ...fontAwesome6Categories];\n    }\n  }\n};\n</script>\n\n<style scoped></style>\n"],"sourceRoot":"src/components/other"}]}